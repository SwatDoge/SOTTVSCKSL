/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={5623:e=>{"use strict";function t(e,t,n){e instanceof RegExp&&(e=r(e,n)),t instanceof RegExp&&(t=r(t,n));var s=i(e,t,n);return s&&{start:s[0],end:s[1],pre:n.slice(0,s[0]),body:n.slice(s[0]+e.length,s[1]),post:n.slice(s[1]+t.length)}}function r(e,t){var r=t.match(e);return r?r[0]:null}function i(e,t,r){var i,n,s,o,a,c=r.indexOf(e),h=r.indexOf(t,c+1),l=c;if(c>=0&&h>0){if(e===t)return[c,h];for(i=[],s=r.length;l>=0&&!a;)l==c?(i.push(l),c=r.indexOf(e,l+1)):1==i.length?a=[i.pop(),h]:((n=i.pop())<s&&(s=n,o=h),h=r.indexOf(t,l+1)),l=c<h&&c>=0?c:h;i.length&&(a=[s,o])}return a}e.exports=t,t.range=i},3644:(e,t,r)=>{var i=r(1048),n=r(5623);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),y(function(e){return e.split("\\\\").join(s).split("\\{").join(o).split("\\}").join(a).split("\\,").join(c).split("\\.").join(h)}(e),!0).map(u)):[]};var s="\0SLASH"+Math.random()+"\0",o="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",h="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function u(e){return e.split(s).join("\\").split(o).join("{").split(a).join("}").split(c).join(",").split(h).join(".")}function f(e){if(!e)return[""];var t=[],r=n("{","}",e);if(!r)return e.split(",");var i=r.pre,s=r.body,o=r.post,a=i.split(",");a[a.length-1]+="{"+s+"}";var c=f(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function d(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function _(e,t){return e<=t}function m(e,t){return e>=t}function y(e,t){var r=[],s=n("{","}",e);if(!s||/\$$/.test(s.pre))return[e];var o,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),u=c||h,g=s.body.indexOf(",")>=0;if(!u&&!g)return s.post.match(/,.*\}/)?y(e=s.pre+"{"+s.body+a+s.post):[e];if(u)o=s.body.split(/\.\./);else if(1===(o=f(s.body)).length&&1===(o=y(o[0],!1).map(d)).length)return(w=s.post.length?y(s.post,!1):[""]).map((function(e){return s.pre+o[0]+e}));var v,b=s.pre,w=s.post.length?y(s.post,!1):[""];if(u){var E=l(o[0]),S=l(o[1]),k=Math.max(o[0].length,o[1].length),x=3==o.length?Math.abs(l(o[2])):1,O=_;S<E&&(x*=-1,O=m);var N=o.some(p);v=[];for(var T=E;O(T,S);T+=x){var C;if(h)"\\"===(C=String.fromCharCode(T))&&(C="");else if(C=String(T),N){var L=k-C.length;if(L>0){var A=new Array(L+1).join("0");C=T<0?"-"+A+C.slice(1):A+C}}v.push(C)}}else v=i(o,(function(e){return y(e,!1)}));for(var P=0;P<v.length;P++)for(var R=0;R<w.length;R++){var j=b+v[P]+w[R];(!t||u||j)&&r.push(j)}return r}},1048:e=>{e.exports=function(e,r){for(var i=[],n=0;n<e.length;n++){var s=r(e[n],n);t(s)?i.push.apply(i,s):i.push(s)}return i};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},7334:(e,t,r)=>{e.exports=l,l.realpath=l,l.sync=u,l.realpathSync=u,l.monkeypatch=function(){i.realpath=l,i.realpathSync=u},l.unmonkeypatch=function(){i.realpath=n,i.realpathSync=s};var i=r(7147),n=i.realpath,s=i.realpathSync,o=process.version,a=/^v[0-5]\./.test(o),c=r(7059);function h(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function l(e,t,r){if(a)return n(e,t,r);"function"==typeof t&&(r=t,t=null),n(e,t,(function(i,n){h(i)?c.realpath(e,t,r):r(i,n)}))}function u(e,t){if(a)return s(e,t);try{return s(e,t)}catch(r){if(h(r))return c.realpathSync(e,t);throw r}}},7059:(e,t,r)=>{var i=r(1017),n="win32"===process.platform,s=r(7147),o=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);if(i.normalize,n)var a=/(.*?)(?:[\/\\]+|$)/g;else a=/(.*?)(?:[\/]+|$)/g;if(n)var c=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else c=/^[\/]*/;t.realpathSync=function(e,t){if(e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,o,h,l,u=e,f={},d={};function p(){var t=c.exec(e);r=t[0].length,o=t[0],h=t[0],l="",n&&!d[h]&&(s.lstatSync(h),d[h]=!0)}for(p();r<e.length;){a.lastIndex=r;var _=a.exec(e);if(l=o,o+=_[0],h=l+_[1],r=a.lastIndex,!(d[h]||t&&t[h]===h)){var m;if(t&&Object.prototype.hasOwnProperty.call(t,h))m=t[h];else{var y=s.lstatSync(h);if(!y.isSymbolicLink()){d[h]=!0,t&&(t[h]=h);continue}var g=null;if(!n){var v=y.dev.toString(32)+":"+y.ino.toString(32);f.hasOwnProperty(v)&&(g=f[v])}null===g&&(s.statSync(h),g=s.readlinkSync(h)),m=i.resolve(l,g),t&&(t[h]=m),n||(f[v]=g)}e=i.resolve(m,e.slice(r)),p()}}return t&&(t[u]=e),e},t.realpath=function(e,t,r){if("function"!=typeof r&&(r=function(e){return"function"==typeof e?e:function(){var e;if(o){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}(t),t=null),e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var h,l,u,f,d=e,p={},_={};function m(){var t=c.exec(e);h=t[0].length,l=t[0],u=t[0],f="",n&&!_[u]?s.lstat(u,(function(e){if(e)return r(e);_[u]=!0,y()})):process.nextTick(y)}function y(){if(h>=e.length)return t&&(t[d]=e),r(null,e);a.lastIndex=h;var i=a.exec(e);return f=l,l+=i[0],u=f+i[1],h=a.lastIndex,_[u]||t&&t[u]===u?process.nextTick(y):t&&Object.prototype.hasOwnProperty.call(t,u)?b(t[u]):s.lstat(u,g)}function g(e,i){if(e)return r(e);if(!i.isSymbolicLink())return _[u]=!0,t&&(t[u]=u),process.nextTick(y);if(!n){var o=i.dev.toString(32)+":"+i.ino.toString(32);if(p.hasOwnProperty(o))return v(null,p[o],u)}s.stat(u,(function(e){if(e)return r(e);s.readlink(u,(function(e,t){n||(p[o]=t),v(e,t)}))}))}function v(e,n,s){if(e)return r(e);var o=i.resolve(f,n);t&&(t[s]=o),b(o)}function b(t){e=i.resolve(t,e.slice(h)),m()}m()}},6772:(e,t,r)=>{function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.setopts=function(e,t,r){if(r||(r={}),r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.fs=r.fs||n,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(l))}(e,r),e.changedCwd=!1;var o=process.cwd();i(r,"cwd")?(e.cwd=s.resolve(r.cwd),e.changedCwd=e.cwd!==o):e.cwd=o,e.root=r.root||s.resolve(e.cwd,"/"),e.root=s.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=a(e.cwd)?e.cwd:u(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new c(t,r),e.options=e.minimatch.options},t.ownProp=i,t.makeAbs=u,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),i=0,n=e.matches.length;i<n;i++){var s=e.matches[i];if(s&&0!==Object.keys(s).length){var o=Object.keys(s);t?r.push.apply(r,o):o.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[i];t?r.push(a):r[a]=!0}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(h)),e.mark){for(i=0;i<r.length;i++)r[i]=e._mark(r[i]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),i=e.cache[t]||e.cache[u(e,t)];return r&&i&&(r="DIR"!==i&&!Array.isArray(i)),r})))}e.ignore.length&&(r=r.filter((function(t){return!f(e,t)}))),e.found=r},t.mark=function(e,t){var r=u(e,t),i=e.cache[r],n=t;if(i){var s="DIR"===i||Array.isArray(i),o="/"===t.slice(-1);if(s&&!o?n+="/":!s&&o&&(n=n.slice(0,-1)),n!==t){var a=u(e,n);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return n},t.isIgnored=f,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var n=r(7147),s=r(1017),o=r(1171),a=r(4095),c=o.Minimatch;function h(e,t){return e.localeCompare(t,"en")}function l(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new c(r,{dot:!0})}return{matcher:new c(e,{dot:!0}),gmatcher:t}}function u(e,t){var r=t;return r="/"===t.charAt(0)?s.join(e.root,t):a(t)||""===t?t:e.changedCwd?s.resolve(e.cwd,t):s.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function f(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},2884:(e,t,r)=>{e.exports=g;var i=r(7334),n=r(1171),s=(n.Minimatch,r(4378)),o=r(2361).EventEmitter,a=r(1017),c=r(9491),h=r(4095),l=r(4751),u=r(6772),f=u.setopts,d=u.ownProp,p=r(7844),_=(r(3837),u.childrenIgnored),m=u.isIgnored,y=r(778);function g(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return l(e,t)}return new b(e,t,r)}g.sync=l;var v=g.GlobSync=l.GlobSync;function b(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new v(e,t)}if(!(this instanceof b))return new b(e,t,r);f(this,e,t),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),"function"==typeof r&&(r=y(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var n=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===i)return o();for(var s=0;s<i;s++)this._process(this.minimatch.set[s],s,!1,o);function o(){--n._processing,n._processing<=0&&n._finish()}}g.glob=g,g.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}({},t);r.noprocess=!0;var i=new b(e,r).minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var n=0;n<i[0].length;n++)if("string"!=typeof i[0][n])return!0;return!1},g.Glob=b,s(b,o),b.prototype._finish=function(){if(c(this instanceof b),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();u.finish(this),this.emit("end",this.found)}},b.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,i)}function i(){0==--e&&t._finish()}},b.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),s=this,o=n.length;if(0===o)return t();var a=this.matches[e]=Object.create(null);n.forEach((function(r,n){r=s._makeAbs(r),i.realpath(r,s.realpathCache,(function(i,n){i?"stat"===i.syscall?a[r]=!0:s.emit("error",i):a[n]=!0,0==--o&&(s.matches[e]=a,t())}))}))},b.prototype._mark=function(e){return u.mark(this,e)},b.prototype._makeAbs=function(e){return u.makeAbs(this,e)},b.prototype.abort=function(){this.aborted=!0,this.emit("abort")},b.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},b.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);for(this._processQueue.length=0,t=0;t<i.length;t++){var n=i[t];this._processing--,this._process(n[0],n[1],n[2],n[3])}}}},b.prototype._process=function(e,t,r,i){if(c(this instanceof b),c("function"==typeof i),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,i]);else{for(var s,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t,i);case 0:s=null;break;default:s=e.slice(0,o).join("/")}var a,l=e.slice(o);null===s?a=".":h(s)||h(e.join("/"))?(s&&h(s)||(s="/"+s),a=s):a=s;var u=this._makeAbs(a);if(_(this,a))return i();l[0]===n.GLOBSTAR?this._processGlobStar(s,a,u,l,t,r,i):this._processReaddir(s,a,u,l,t,r,i)}},b.prototype._processReaddir=function(e,t,r,i,n,s,o){var a=this;this._readdir(r,s,(function(c,h){return a._processReaddir2(e,t,r,i,n,s,h,o)}))},b.prototype._processReaddir2=function(e,t,r,i,n,s,o,c){if(!o)return c();for(var h=i[0],l=!!this.minimatch.negate,u=h._glob,f=this.dot||"."===u.charAt(0),d=[],p=0;p<o.length;p++)("."!==(m=o[p]).charAt(0)||f)&&(l&&!e?!m.match(h):m.match(h))&&d.push(m);var _=d.length;if(0===_)return c();if(1===i.length&&!this.mark&&!this.stat){for(this.matches[n]||(this.matches[n]=Object.create(null)),p=0;p<_;p++){var m=d[p];e&&(m="/"!==e?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=a.join(this.root,m)),this._emitMatch(n,m)}return c()}for(i.shift(),p=0;p<_;p++)m=d[p],e&&(m="/"!==e?e+"/"+m:e+m),this._process([m].concat(i),n,s,c);c()},b.prototype._emitMatch=function(e,t){if(!this.aborted&&!m(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=h(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var i=this.cache[r];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0;var n=this.statCache[r];n&&this.emit("stat",t,n),this.emit("match",t)}}},b.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,i=p("lstat\0"+e,(function(i,n){if(i&&"ENOENT"===i.code)return t();var s=n&&n.isSymbolicLink();r.symlinks[e]=s,s||!n||n.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));i&&r.fs.lstat(e,i)}},b.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=p("readdir\0"+e+"\0"+t,r))){if(t&&!d(this.symlinks,e))return this._readdirInGlobStar(e,r);if(d(this.cache,e)){var i=this.cache[e];if(!i||"FILE"===i)return r();if(Array.isArray(i))return r(null,i)}this.fs.readdir(e,function(e,t,r){return function(i,n){i?e._readdirError(t,i,r):e._readdirEntries(t,n,r)}}(this,e,r))}},b.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<t.length;i++){var n=t[i];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,r(null,t)}},b.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(e);if(this.cache[i]="FILE",i===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);n.path=this.cwd,n.code=t.code,this.emit("error",n),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},b.prototype._processGlobStar=function(e,t,r,i,n,s,o){var a=this;this._readdir(r,s,(function(c,h){a._processGlobStar2(e,t,r,i,n,s,h,o)}))},b.prototype._processGlobStar2=function(e,t,r,i,n,s,o,a){if(!o)return a();var c=i.slice(1),h=e?[e]:[],l=h.concat(c);this._process(l,n,!1,a);var u=this.symlinks[r],f=o.length;if(u&&s)return a();for(var d=0;d<f;d++)if("."!==o[d].charAt(0)||this.dot){var p=h.concat(o[d],c);this._process(p,n,!0,a);var _=h.concat(o[d],i);this._process(_,n,!0,a)}a()},b.prototype._processSimple=function(e,t,r){var i=this;this._stat(e,(function(n,s){i._processSimple2(e,t,n,s,r)}))},b.prototype._processSimple2=function(e,t,r,i,n){if(this.matches[t]||(this.matches[t]=Object.create(null)),!i)return n();if(e&&h(e)&&!this.nomount){var s=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=a.join(this.root,e):(e=a.resolve(this.root,e),s&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),n()},b.prototype._stat=function(e,t){var r=this._makeAbs(e),i="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&d(this.cache,r)){var n=this.cache[r];if(Array.isArray(n)&&(n="DIR"),!i||"DIR"===n)return t(null,n);if(i&&"FILE"===n)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var o=s.isDirectory()?"DIR":"FILE";return i&&"FILE"===o?t():t(null,o,s)}var a=this,c=p("stat\0"+r,(function(i,n){if(n&&n.isSymbolicLink())return a.fs.stat(r,(function(i,s){i?a._stat2(e,r,null,n,t):a._stat2(e,r,i,s,t)}));a._stat2(e,r,i,n,t)}));c&&a.fs.lstat(r,c)},b.prototype._stat2=function(e,t,r,i,n){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,n();var s="/"===e.slice(-1);if(this.statCache[t]=i,"/"===t.slice(-1)&&i&&!i.isDirectory())return n(null,!1,i);var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||o,s&&"FILE"===o?n():n(null,o,i)}},4751:(e,t,r)=>{e.exports=d,d.GlobSync=p;var i=r(7334),n=r(1171),s=(n.Minimatch,r(2884).Glob,r(3837),r(1017)),o=r(9491),a=r(4095),c=r(6772),h=c.setopts,l=c.ownProp,u=c.childrenIgnored,f=c.isIgnored;function d(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new p(e,t).found}function p(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof p))return new p(e,t);if(h(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var i=0;i<r;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}p.prototype._finish=function(){if(o(this instanceof p),this.realpath){var e=this;this.matches.forEach((function(t,r){var n=e.matches[r]=Object.create(null);for(var s in t)try{s=e._makeAbs(s),n[i.realpathSync(s,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(s)]=!0}}))}c.finish(this)},p.prototype._process=function(e,t,r){o(this instanceof p);for(var i,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t);case 0:i=null;break;default:i=e.slice(0,s).join("/")}var c,h=e.slice(s);null===i?c=".":a(i)||a(e.join("/"))?(i&&a(i)||(i="/"+i),c=i):c=i;var l=this._makeAbs(c);u(this,c)||(h[0]===n.GLOBSTAR?this._processGlobStar(i,c,l,h,t,r):this._processReaddir(i,c,l,h,t,r))},p.prototype._processReaddir=function(e,t,r,i,n,o){var a=this._readdir(r,o);if(a){for(var c=i[0],h=!!this.minimatch.negate,l=c._glob,u=this.dot||"."===l.charAt(0),f=[],d=0;d<a.length;d++)("."!==(m=a[d]).charAt(0)||u)&&(h&&!e?!m.match(c):m.match(c))&&f.push(m);var p=f.length;if(0!==p)if(1!==i.length||this.mark||this.stat)for(i.shift(),d=0;d<p;d++){var _;m=f[d],_=e?[e,m]:[m],this._process(_.concat(i),n,o)}else{this.matches[n]||(this.matches[n]=Object.create(null));for(d=0;d<p;d++){var m=f[d];e&&(m="/"!==e.slice(-1)?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=s.join(this.root,m)),this._emitMatch(n,m)}}}},p.prototype._emitMatch=function(e,t){if(!f(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var i=this.cache[r];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},p.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=this.fs.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var i=r&&r.isSymbolicLink();return this.symlinks[e]=i,i||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},p.prototype._readdir=function(e,t){if(t&&!l(this.symlinks,e))return this._readdirInGlobStar(e);if(l(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},p.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var i=t[r];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,t},p.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=t.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},p.prototype._processGlobStar=function(e,t,r,i,n,s){var o=this._readdir(r,s);if(o){var a=i.slice(1),c=e?[e]:[],h=c.concat(a);this._process(h,n,!1);var l=o.length;if(!this.symlinks[r]||!s)for(var u=0;u<l;u++)if("."!==o[u].charAt(0)||this.dot){var f=c.concat(o[u],a);this._process(f,n,!0);var d=c.concat(o[u],i);this._process(d,n,!0)}}},p.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&a(e)&&!this.nomount){var i=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),i&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},p.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&l(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!r||"DIR"===i)return i;if(r&&"FILE"===i)return!1}var n=this.statCache[t];if(!n){var s;try{s=this.fs.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{n=this.fs.statSync(t)}catch(e){n=s}else n=s}return this.statCache[t]=n,i=!0,n&&(i=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,(!r||"FILE"!==i)&&i},p.prototype._mark=function(e){return c.mark(this,e)},p.prototype._makeAbs=function(e){return c.makeAbs(this,e)}},7844:(e,t,r)=>{var i=r(2479),n=Object.create(null),s=r(778);function o(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i]=e[i];return r}e.exports=i((function(e,t){return n[e]?(n[e].push(t),null):(n[e]=[t],function(e){return s((function t(){var r=n[e],i=r.length,s=o(arguments);try{for(var a=0;a<i;a++)r[a].apply(null,s)}finally{r.length>i?(r.splice(0,i),process.nextTick((function(){t.apply(null,s)}))):delete n[e]}}))}(e))}))},4378:(e,t,r)=>{try{var i=r(3837);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=r(5717)}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},1171:(e,t,r)=>{e.exports=f,f.Minimatch=d;var i={sep:"/"};try{i=r(1017)}catch(e){}var n=f.GLOBSTAR=d.GLOBSTAR={},s=r(3644),o={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c="[^/]*?",h="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{}),l=/\/+/;function u(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),Object.keys(e).forEach((function(t){r[t]=e[t]})),r}function f(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new d(t,r).match(e))}function d(e,t){if(!(this instanceof d))return new d(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==i.sep&&(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function p(e,t){if(t||(t=this instanceof d?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:s(e)}f.filter=function(e,t){return t=t||{},function(r,i,n){return f(r,e,t)}},f.defaults=function(e){if(!e||!Object.keys(e).length)return f;var t=f,r=function(r,i,n){return t.minimatch(r,i,u(e,n))};return r.Minimatch=function(r,i){return new t.Minimatch(r,u(e,i))},r},d.defaults=function(e){return e&&Object.keys(e).length?f.defaults(e).Minimatch:d},d.prototype.debug=function(){},d.prototype.make=function(){if(!this._made){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(l)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r}else this.empty=!0;else this.comment=!0}},d.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=0;if(!this.options.nonegate){for(var i=0,n=e.length;i<n&&"!"===e.charAt(i);i++)t=!t,r++;r&&(this.pattern=e.substr(r)),this.negate=t}},f.braceExpand=function(e,t){return p(e,t)},d.prototype.braceExpand=p,d.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return n;if(""===e)return"";var i,s="",l=!!r.nocase,u=!1,f=[],d=[],p=!1,m=-1,y=-1,g="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function b(){if(i){switch(i){case"*":s+=c,l=!0;break;case"?":s+=a,l=!0;break;default:s+="\\"+i}v.debug("clearStateChar %j %j",i,s),i=!1}}for(var w,E=0,S=e.length;E<S&&(w=e.charAt(E));E++)if(this.debug("%s\t%s %s %j",e,E,s,w),u&&h[w])s+="\\"+w,u=!1;else switch(w){case"/":return!1;case"\\":b(),u=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,E,s,w),p){this.debug("  in class"),"!"===w&&E===y+1&&(w="^"),s+=w;continue}v.debug("call clearStateChar %j",i),b(),i=w,r.noext&&b();continue;case"(":if(p){s+="(";continue}if(!i){s+="\\(";continue}f.push({type:i,start:E-1,reStart:s.length,open:o[i].open,close:o[i].close}),s+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,s),i=!1;continue;case")":if(p||!f.length){s+="\\)";continue}b(),l=!0;var k=f.pop();s+=k.close,"!"===k.type&&d.push(k),k.reEnd=s.length;continue;case"|":if(p||!f.length||u){s+="\\|",u=!1;continue}b(),s+="|";continue;case"[":if(b(),p){s+="\\"+w;continue}p=!0,y=E,m=s.length,s+=w;continue;case"]":if(E===y+1||!p){s+="\\"+w,u=!1;continue}if(p){var x=e.substring(y+1,E);try{RegExp("["+x+"]")}catch(e){var O=this.parse(x,_);s=s.substr(0,m)+"\\["+O[0]+"\\]",l=l||O[1],p=!1;continue}}l=!0,p=!1,s+=w;continue;default:b(),u?u=!1:!h[w]||"^"===w&&p||(s+="\\"),s+=w}for(p&&(x=e.substr(y+1),O=this.parse(x,_),s=s.substr(0,m)+"\\["+O[0],l=l||O[1]),k=f.pop();k;k=f.pop()){var N=s.slice(k.reStart+k.open.length);this.debug("setting tail",s,k),N=N.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",N,N,k,s);var T="*"===k.type?c:"?"===k.type?a:"\\"+k.type;l=!0,s=s.slice(0,k.reStart)+T+"\\("+N}b(),u&&(s+="\\\\");var C=!1;switch(s.charAt(0)){case".":case"[":case"(":C=!0}for(var L=d.length-1;L>-1;L--){var A=d[L],P=s.slice(0,A.reStart),R=s.slice(A.reStart,A.reEnd-8),j=s.slice(A.reEnd-8,A.reEnd),I=s.slice(A.reEnd);j+=I;var D=P.split("(").length-1,M=I;for(E=0;E<D;E++)M=M.replace(/\)[+*?]?/,"");var B="";""===(I=M)&&t!==_&&(B="$"),s=P+R+I+B+j}if(""!==s&&l&&(s="(?=.)"+s),C&&(s=g+s),t===_)return[s,l];if(!l)return e.replace(/\\(.)/g,"$1");var U=r.nocase?"i":"";try{var F=new RegExp("^"+s+"$",U)}catch(e){return new RegExp("$.")}return F._glob=e,F._src=s,F};var _={};f.makeRe=function(e,t){return new d(e,t||{}).makeRe()},d.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?c:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=t.nocase?"i":"",s=e.map((function(e){return e.map((function(e){return e===n?r:"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e._src})).join("\\/")})).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch(e){this.regexp=!1}return this.regexp},f.match=function(e,t,r){var i=new d(t,r=r||{});return e=e.filter((function(e){return i.match(e)})),i.options.nonull&&!e.length&&e.push(t),e},d.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/")),e=e.split(l),this.debug(this.pattern,"split",e);var n,s,o=this.set;for(this.debug(this.pattern,"set",o),s=e.length-1;s>=0&&!(n=e[s]);s--);for(s=0;s<o.length;s++){var a=o[s],c=e;if(r.matchBase&&1===a.length&&(c=[n]),this.matchOne(c,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},d.prototype.matchOne=function(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,c=t.length;s<a&&o<c;s++,o++){this.debug("matchOne loop");var h,l=t[o],u=e[s];if(this.debug(t,l,u),!1===l)return!1;if(l===n){this.debug("GLOBSTAR",[t,l,u]);var f=s,d=o+1;if(d===c){for(this.debug("** at the end");s<a;s++)if("."===e[s]||".."===e[s]||!i.dot&&"."===e[s].charAt(0))return!1;return!0}for(;f<a;){var p=e[f];if(this.debug("\nglobstar while",e,f,t,d,p),this.matchOne(e.slice(f),t.slice(d),r))return this.debug("globstar found match!",f,a,p),!0;if("."===p||".."===p||!i.dot&&"."===p.charAt(0)){this.debug("dot detected!",e,f,t,d);break}this.debug("globstar swallow a segment, and continue"),f++}return!(!r||(this.debug("\n>>> no match, partial?",e,f,t,d),f!==a))}if("string"==typeof l?(h=i.nocase?u.toLowerCase()===l.toLowerCase():u===l,this.debug("string match",l,u,h)):(h=u.match(l),this.debug("pattern match",l,u,h)),!h)return!1}if(s===a&&o===c)return!0;if(s===a)return r;if(o===c)return s===a-1&&""===e[s];throw new Error("wtf?")}},778:(e,t,r)=>{var i=r(2479);function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=i(n),e.exports.strict=i(s),n.proto=n((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},4095:e=>{"use strict";function t(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",i=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||i)}e.exports="win32"===process.platform?r:t,e.exports.posix=t,e.exports.win32=r},984:(e,t,r)=>{const i=r(9491),n=r(1017),s=r(7147);let o;try{o=r(2884)}catch(e){}const a={nosort:!0,silent:!0};let c=0;const h="win32"===process.platform,l=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||s[t],e[t+="Sync"]=e[t]||s[t]})),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===o)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||a},u=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i.equal(typeof r,"function","rimraf: callback function required"),i(t,"rimraf: invalid options argument provided"),i.equal(typeof t,"object","rimraf: options should be object"),l(t);let n=0,s=null,a=0;const h=(e,i)=>e?r(e):(a=i.length,0===a?r():void i.forEach((e=>{const i=o=>{if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&n<t.maxBusyTries)return n++,setTimeout((()=>f(e,t,i)),100*n);if("EMFILE"===o.code&&c<t.emfileWait)return setTimeout((()=>f(e,t,i)),c++);"ENOENT"===o.code&&(o=null)}c=0,(e=>{s=s||e,0==--a&&r(s)})(o)};f(e,t,i)})));if(t.disableGlob||!o.hasMagic(e))return h(null,[e]);t.lstat(e,((r,i)=>{if(!r)return h(null,[e]);o(e,t.glob,h)}))},f=(e,t,r)=>{i(e),i(t),i("function"==typeof r),t.lstat(e,((i,n)=>i&&"ENOENT"===i.code?r(null):(i&&"EPERM"===i.code&&h&&d(e,t,i,r),n&&n.isDirectory()?_(e,t,i,r):void t.unlink(e,(i=>{if(i){if("ENOENT"===i.code)return r(null);if("EPERM"===i.code)return h?d(e,t,i,r):_(e,t,i,r);if("EISDIR"===i.code)return _(e,t,i,r)}return r(i)})))))},d=(e,t,r,n)=>{i(e),i(t),i("function"==typeof n),t.chmod(e,438,(i=>{i?n("ENOENT"===i.code?null:r):t.stat(e,((i,s)=>{i?n("ENOENT"===i.code?null:r):s.isDirectory()?_(e,t,r,n):t.unlink(e,n)}))}))},p=(e,t,r)=>{i(e),i(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}let n;try{n=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}n.isDirectory()?g(e,t,r):t.unlinkSync(e)},_=(e,t,r,n)=>{i(e),i(t),i("function"==typeof n),t.rmdir(e,(i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?n(r):n(i):m(e,t,n)}))},m=(e,t,r)=>{i(e),i(t),i("function"==typeof r),t.readdir(e,((i,s)=>{if(i)return r(i);let o,a=s.length;if(0===a)return t.rmdir(e,r);s.forEach((i=>{u(n.join(e,i),t,(i=>{if(!o)return i?r(o=i):void(0==--a&&t.rmdir(e,r))}))}))}))},y=(e,t)=>{let r;if(l(t=t||{}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i(t,"rimraf: missing options"),i.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!o.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(i){r=o.sync(e,t.glob)}if(r.length)for(let e=0;e<r.length;e++){const i=r[e];let n;try{n=t.lstatSync(i)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&h&&p(i,t,e)}try{n&&n.isDirectory()?g(i,t,null):t.unlinkSync(i)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return h?p(i,t,e):g(i,t,e);if("EISDIR"!==e.code)throw e;g(i,t,e)}}},g=(e,t,r)=>{i(e),i(t);try{t.rmdirSync(e)}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code)throw r;"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code||v(e,t)}},v=(e,t)=>{i(e),i(t),t.readdirSync(e).forEach((r=>y(n.join(e,r),t)));const r=h?100:1;let s=0;for(;;){let i=!0;try{const n=t.rmdirSync(e,t);return i=!1,n}finally{if(++s<r&&i)continue}}};e.exports=u,u.sync=y},6276:(e,t,r)=>{const i=r(7147),n=r(2037),s=r(1017),o=r(6113),a={fs:i.constants,os:n.constants},c=r(984),h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=/XXXXXX/,u=(a.O_CREAT||a.fs.O_CREAT)|(a.O_EXCL||a.fs.O_EXCL)|(a.O_RDWR||a.fs.O_RDWR),f="win32"===n.platform(),d=a.EBADF||a.os.errno.EBADF,p=a.ENOENT||a.os.errno.ENOENT,_=[],m=i.rmdirSync.bind(i),y=c.sync;let g=!1;function v(e,t){const r=C(e,t),n=r[0],s=r[1];try{A(n)}catch(e){return s(e)}let o=n.tries;!function e(){try{const t=L(n);i.stat(t,(function(r){if(!r)return o-- >0?e():s(new Error("Could not get a unique tmp filename, max tries reached "+t));s(null,t)}))}catch(e){s(e)}}()}function b(e){const t=C(e)[0];A(t);let r=t.tries;do{const e=L(t);try{i.statSync(e)}catch(t){return e}}while(r-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function w(e,t){const r=function(e){if(e&&!I(e))return t(e);t()};0<=e[0]?i.close(e[0],(function(){i.unlink(e[1],r)})):i.unlink(e[1],r)}function E(e){let t=null;try{0<=e[0]&&i.closeSync(e[0])}catch(e){if(!D(e,-d,"EBADF")&&!I(e))throw e}finally{try{i.unlinkSync(e[1])}catch(e){I(e)||(t=e)}}if(null!==t)throw t}function S(e,t,r,i){const n=x(E,[t,e],i),s=x(w,[t,e],i,n);return r.keep||_.unshift(n),i?n:s}function k(e,t,r){const n=t.unsafeCleanup?c:i.rmdir.bind(i),s=x(t.unsafeCleanup?y:m,e,r),o=x(n,e,r,s);return t.keep||_.unshift(s),r?s:o}function x(e,t,r,i){let n=!1;return function s(o){if(!n){const a=i||s,c=_.indexOf(a);return c>=0&&_.splice(c,1),n=!0,r||e===m||e===y?e(t):e(t,o||function(){})}}}function O(e){let t=[],r=null;try{r=o.randomBytes(e)}catch(t){r=o.pseudoRandomBytes(e)}for(var i=0;i<e;i++)t.push(h[r[i]%h.length]);return t.join("")}function N(e){return null===e||T(e)||!e.trim()}function T(e){return void 0===e}function C(e,t){if("function"==typeof e)return[{},e];if(T(e))return[{},t];const r={};for(const t of Object.getOwnPropertyNames(e))r[t]=e[t];return[r,t]}function L(e){const t=e.tmpdir;if(!T(e.name))return s.join(t,e.dir,e.name);if(!T(e.template))return s.join(t,e.dir,e.template).replace(l,O(6));const r=[e.prefix?e.prefix:"tmp","-",process.pid,"-",O(12),e.postfix?"-"+e.postfix:""].join("");return s.join(t,e.dir,r)}function A(e){e.tmpdir=M(e);const t=e.tmpdir;if(T(e.name)||j(e.name,"name",t),T(e.dir)||j(e.dir,"dir",t),!T(e.template)&&(j(e.template,"template",t),!e.template.match(l)))throw new Error(`Invalid template, found "${e.template}".`);if(!T(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=T(e.name)?e.tries||3:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=T(e.dir)?"":s.relative(t,P(e.dir,t)),e.template=T(e.template)?void 0:s.relative(t,P(e.template,t)),e.template=N(e.template)?void 0:s.relative(e.dir,e.template),e.name=T(e.name)?void 0:R(e.name),e.prefix=T(e.prefix)?"":e.prefix,e.postfix=T(e.postfix)?"":e.postfix}function P(e,t){const r=R(e);return r.startsWith(t)?s.resolve(r):s.resolve(s.join(t,r))}function R(e){return N(e)?e:e.replace(/["']/g,"")}function j(e,t,r){if("name"===t){if(s.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let r=s.basename(e);if(".."===r||"."===r||r!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(s.isAbsolute(e)&&!e.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${e}".`);let i=P(e,r);if(!i.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${i}".`)}}function I(e){return D(e,-p,"ENOENT")}function D(e,t,r){return f?e.code===r:e.code===r&&e.errno===t}function M(e){return s.resolve(R(e&&e.tmpdir||n.tmpdir()))}process.addListener("exit",(function(){if(g)for(;_.length;)try{_[0]()}catch(e){}})),Object.defineProperty(e.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return M()}}),e.exports.dir=function(e,t){const r=C(e,t),n=r[0],s=r[1];v(n,(function(e,t){if(e)return s(e);i.mkdir(t,n.mode||448,(function(e){if(e)return s(e);s(null,t,k(t,n,!1))}))}))},e.exports.dirSync=function(e){const t=C(e)[0],r=b(t);return i.mkdirSync(r,t.mode||448),{name:r,removeCallback:k(r,t,!0)}},e.exports.file=function(e,t){const r=C(e,t),n=r[0],s=r[1];v(n,(function(e,t){if(e)return s(e);i.open(t,u,n.mode||384,(function(e,r){if(e)return s(e);if(n.discardDescriptor)return i.close(r,(function(e){return s(e,t,void 0,S(t,-1,n,!1))}));{const e=n.discardDescriptor||n.detachDescriptor;s(null,t,r,S(t,e?-1:r,n,!1))}}))}))},e.exports.fileSync=function(e){const t=C(e)[0],r=t.discardDescriptor||t.detachDescriptor,n=b(t);var s=i.openSync(n,u,t.mode||384);return t.discardDescriptor&&(i.closeSync(s),s=void 0),{name:n,fd:s,removeCallback:S(n,r?-1:s,t,!0)}},e.exports.tmpName=v,e.exports.tmpNameSync=b,e.exports.setGracefulCleanup=function(){g=!0}},112:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const a=s(r(9496)),c=o(r(7147)),h=o(r(1017)),l=s(r(3584));let u;t.activate=function(e){let t;u?.close(),(t=a.workspace.workspaceFolders?.find((e=>"Krunker sync"===e.name)))&&c.default.readdirSync(t.uri.fsPath).includes(".tmp")&&(c.default.rmSync(h.default.join(t.uri.fsPath,".tmp")),u=l.establish_server(t)),e.subscriptions.push(a.commands.registerCommand("krunkscript-linker.connect",(()=>{u=l.sync_server()})))},t.deactivate=function(){u?.close(),a.window.showErrorMessage("Host disconnected.")}},3920:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(1017)),c=s(r(9496)),h=o(r(8777));t.default=function(e){const t=new h.default.Server({port:8586});return t.on("connection",(e=>{if(t.clients.size>1)return e.close(),void c.window.showErrorMessage("You can only connect 1 editor at a time.");c.window.showInformationMessage("Succesfully connected. Ready for use."),e.onclose=()=>{c.window.showInformationMessage("Krunkscript disconnected."),t.clients.clear()},e.onmessage=e=>{let t=JSON.parse(e.data.toString("utf-8"));switch(t?.type){case"error":let e=t.message.split("\n");for(let t=0;t<e.length;t++)c.window.showErrorMessage(e[t]);break;case"success":c.window.showInformationMessage("Compiled succesfully")}},c.workspace.onDidSaveTextDocument((t=>{if("krnk"===t.languageId&&"file"===t.uri.scheme){let r={type:"down_sync",server:null,client:null};r[a.default.basename(t.fileName,".krnk")??null]=t.getText().replace("\r",""),e.send(JSON.stringify(r))}}))})),t}},3584:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sync_server=t.establish_server=void 0;const n=i(r(3920));t.establish_server=n.default;const s=i(r(8727));t.sync_server=s.default},8727:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(9496)),c=o(r(8777)),h=s(r(6104));t.default=function(){const e=new c.default.Server({port:8586});return e.on("connection",(t=>{if(e.clients.size>1)return t.close(),void a.window.showErrorMessage("You can only connect 1 editor at a time.");t.onclose=()=>{e.clients.clear()},t.onmessage=r=>{let i=JSON.parse(r.data.toString("utf-8")),n={type:"up_sync",server:"",client:""};"up_sync"===i?.type&&(n=i,t.send(JSON.stringify({type:"restore"})),e.close(),h.up_sync(n))}})),a.window.showInformationMessage("Connection is up, looking to sync with editor..."),e}},6104:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.up_sync=void 0;const n=i(r(3216));t.up_sync=n.default},3216:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(9496)),c=o(r(6276)),h=o(r(1017));t.default=async function(e){const t=c.default.dirSync({keep:!0}),r=a.Uri.file(t.name),i=new a.WorkspaceEdit;a.workspace.updateWorkspaceFolders(0,a.workspace.workspaceFolders?.length??0,{uri:a.Uri.file(h.default.join(r.path)),name:"Krunker sync"}),Object.keys(e).filter((e=>"type"!==e)).map((t=>{const i=new a.WorkspaceEdit,n=a.Uri.file(h.default.join(r.path,t+".krnk"));i.createFile(n,{overwrite:!0}),i.set(n,[a.TextEdit.insert(new a.Position(0,0),e[t]??"")]),a.workspace.applyEdit(i)})),i.createFile(a.Uri.file(h.default.join(r.path,".tmp"))),a.workspace.applyEdit(i)}},2479:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){i[e]=t[e]})),i;function i(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var i=t.apply(this,e),n=e[e.length-1];return"function"==typeof i&&i!==n&&Object.keys(n).forEach((function(e){i[e]=n[e]})),i}}},8777:(e,t,r)=>{"use strict";const i=r(8762);i.createWebSocketStream=r(404),i.Server=r(9284),i.Receiver=r(2957),i.Sender=r(7330),i.WebSocket=i,i.WebSocketServer=i.Server,e.exports=i},977:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:i}=r(1872);function n(e,t){if(0===e.length)return i;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let n=0;for(let t=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return n<t?r.slice(0,n):r}function s(e,t,r,i,n){for(let s=0;s<n;s++)r[i+s]=e[s]^t[3&s]}function o(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){if(c.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),c.readOnly=!1),t}try{const t=r(8447);e.exports={concat:n,mask(e,r,i,n,o){o<48?s(e,r,i,n,o):t.mask(e,r,i,n,o)},toArrayBuffer:a,toBuffer:c,unmask(e,r){e.length<32?o(e,r):t.unmask(e,r)}}}catch(t){e.exports={concat:n,mask:s,toArrayBuffer:a,toBuffer:c,unmask:o}}},1872:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},62:(e,t,r)=>{"use strict";const{kForOnEventAttribute:i,kListener:n}=r(1872),s=Symbol("kCode"),o=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),h=Symbol("kReason"),l=Symbol("kTarget"),u=Symbol("kType"),f=Symbol("kWasClean");class d{constructor(e){this[l]=null,this[u]=e}get target(){return this[l]}get type(){return this[u]}}Object.defineProperty(d.prototype,"target",{enumerable:!0}),Object.defineProperty(d.prototype,"type",{enumerable:!0});class p extends d{constructor(e,t={}){super(e),this[s]=void 0===t.code?0:t.code,this[h]=void 0===t.reason?"":t.reason,this[f]=void 0!==t.wasClean&&t.wasClean}get code(){return this[s]}get reason(){return this[h]}get wasClean(){return this[f]}}Object.defineProperty(p.prototype,"code",{enumerable:!0}),Object.defineProperty(p.prototype,"reason",{enumerable:!0}),Object.defineProperty(p.prototype,"wasClean",{enumerable:!0});class _ extends d{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(_.prototype,"error",{enumerable:!0}),Object.defineProperty(_.prototype,"message",{enumerable:!0});class m extends d{constructor(e,t={}){super(e),this[o]=void 0===t.data?null:t.data}get data(){return this[o]}}Object.defineProperty(m.prototype,"data",{enumerable:!0});const y={addEventListener(e,t,r={}){let s;if("message"===e)s=function(e,r){const i=new m("message",{data:r?e:e.toString()});i[l]=this,t.call(this,i)};else if("close"===e)s=function(e,r){const i=new p("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});i[l]=this,t.call(this,i)};else if("error"===e)s=function(e){const r=new _("error",{error:e,message:e.message});r[l]=this,t.call(this,r)};else{if("open"!==e)return;s=function(){const e=new d("open");e[l]=this,t.call(this,e)}}s[i]=!!r[i],s[n]=t,r.once?this.once(e,s):this.on(e,s)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[n]===t&&!r[i]){this.removeListener(e,r);break}}};e.exports={CloseEvent:p,ErrorEvent:_,Event:d,EventTarget:y,MessageEvent:m}},1503:(e,t,r)=>{"use strict";const{tokenChars:i}=r(6746);function n(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,s,o=Object.create(null),a=!1,c=!1,h=!1,l=-1,u=-1,f=-1,d=0;for(;d<e.length;d++)if(u=e.charCodeAt(d),void 0===r)if(-1===f&&1===i[u])-1===l&&(l=d);else if(0===d||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===f&&(f=d);const i=e.slice(l,f);44===u?(n(t,i,o),o=Object.create(null)):r=i,l=f=-1}}else-1===f&&-1!==l&&(f=d);else if(void 0===s)if(-1===f&&1===i[u])-1===l&&(l=d);else if(32===u||9===u)-1===f&&-1!==l&&(f=d);else if(59===u||44===u){if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===f&&(f=d),n(o,e.slice(l,f),!0),44===u&&(n(t,r,o),o=Object.create(null),r=void 0),l=f=-1}else{if(61!==u||-1===l||-1!==f)throw new SyntaxError(`Unexpected character at index ${d}`);s=e.slice(l,d),l=f=-1}else if(c){if(1!==i[u])throw new SyntaxError(`Unexpected character at index ${d}`);-1===l?l=d:a||(a=!0),c=!1}else if(h)if(1===i[u])-1===l&&(l=d);else if(34===u&&-1!==l)h=!1,f=d;else{if(92!==u)throw new SyntaxError(`Unexpected character at index ${d}`);c=!0}else if(34===u&&61===e.charCodeAt(d-1))h=!0;else if(-1===f&&1===i[u])-1===l&&(l=d);else if(-1===l||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===f&&(f=d);let i=e.slice(l,f);a&&(i=i.replace(/\\/g,""),a=!1),n(o,s,i),44===u&&(n(t,r,o),o=Object.create(null),r=void 0),s=void 0,l=f=-1}}else-1===f&&(f=d);if(-1===l||h||32===u||9===u)throw new SyntaxError("Unexpected end of input");-1===f&&(f=d);const p=e.slice(l,f);return void 0===r?n(t,p,o):(void 0===s?n(o,p,!0):n(o,s,a?p.replace(/\\/g,""):p),n(t,r,o)),t}}},305:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},5196:(e,t,r)=>{"use strict";const i=r(9796),n=r(977),s=r(305),{kStatusCode:o}=r(1872),a=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),h=Symbol("total-length"),l=Symbol("callback"),u=Symbol("buffers"),f=Symbol("error");let d;function p(e){this[u].push(e),this[h]+=e.length}function _(e){this[h]+=e.length,this[c]._maxPayload<1||this[h]<=this[c]._maxPayload?this[u].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][o]=1009,this.removeListener("data",_),this.reset())}function m(e){this[c]._inflate=null,e[o]=1007,this[l](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!d){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;d=new s(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[l];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){d.add((i=>{this._decompress(e,t,((e,t)=>{i(),r(e,t)}))}))}compress(e,t,r){d.add((i=>{this._compress(e,t,((e,t)=>{i(),r(e,t)}))}))}_decompress(e,t,r){const s=this._isServer?"client":"server";if(!this._inflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[h]=0,this._inflate[u]=[],this._inflate.on("error",m),this._inflate.on("data",_)}this._inflate[l]=r,this._inflate.write(e),t&&this._inflate.write(a),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void r(e);const i=n.concat(this._inflate[u],this._inflate[h]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[h]=0,this._inflate[u]=[],t&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),r(null,i)}))}_compress(e,t,r){const s=this._isServer?"server":"client";if(!this._deflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[h]=0,this._deflate[u]=[],this._deflate.on("data",p)}this._deflate[l]=r,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=n.concat(this._deflate[u],this._deflate[h]);t&&(e=e.slice(0,e.length-4)),this._deflate[l]=null,this._deflate[h]=0,this._deflate[u]=[],t&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},2957:(e,t,r)=>{"use strict";const{Writable:i}=r(2781),n=r(5196),{BINARY_TYPES:s,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=r(1872),{concat:h,toArrayBuffer:l,unmask:u}=r(977),{isValidStatusCode:f,isValidUTF8:d}=r(6746);function p(e,t,r,i,n){const s=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,p),s.code=n,s[a]=i,s}e.exports=class extends i{constructor(e={}){super(),this._binaryType=e.binaryType||s[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],i=t.length-e;e>=r.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),i),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,p(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[n.extensionName])return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,p(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,p(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,p(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,p(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,p(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&u(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[n.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}const i=this.dataMessage();if(i)return t(i);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?h(t,e):"arraybuffer"===this._binaryType?l(h(t,e)):t,this.emit("message",r,!0)}else{const r=h(t,e);if(!this._skipUTF8Validation&&!d(r))return this._loop=!1,p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,o),this.end();else{if(1===e.length)return p(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!f(t))return p(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const r=e.slice(2);if(!this._skipUTF8Validation&&!d(r))return p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},7330:(e,t,r)=>{"use strict";r(1808),r(4404);const{randomFillSync:i}=r(6113),n=r(5196),{EMPTY_BUFFER:s}=r(1872),{isValidStatusCode:o}=r(6746),{mask:a,toBuffer:c}=r(977),h=Buffer.alloc(4);class l{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let n=t.mask?6:2,s=e.length;e.length>=65536?(n+=8,s=127):e.length>125&&(n+=2,s=126);const o=Buffer.allocUnsafe(r?e.length+n:n);return o[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(o[0]|=64),o[1]=s,126===s?o.writeUInt16BE(e.length,2):127===s&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?(i(h,0,4),o[1]|=128,o[n-4]=h[0],o[n-3]=h[1],o[n-2]=h[2],o[n-1]=h[3],r?(a(e,h,o,n,e.length),[o]):(a(e,h,e,0,e.length),[o,e])):[o,e]}close(e,t,r,i){let n;if(void 0===e)n=s;else{if("number"!=typeof e||!o(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");n=Buffer.allocUnsafe(2+r),n.writeUInt16BE(e,0),"string"==typeof t?n.write(t,2):n.set(t,2)}else n=Buffer.allocUnsafe(2),n.writeUInt16BE(e,0)}this._deflating?this.enqueue([this.doClose,n,r,i]):this.doClose(n,r,i)}doClose(e,t,r){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const i=c(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,t,c.readOnly,r]):this.doPing(i,t,c.readOnly,r)}doPing(e,t,r,i){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),i)}pong(e,t,r){const i=c(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,t,c.readOnly,r]):this.doPong(i,t,c.readOnly,r)}doPong(e,t,r,i){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),i)}send(e,t,r){const i=c(e),s=this._extensions[n.extensionName];let o=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(a=i.length>=s._threshold),this._compress=a):(a=!1,o=0),t.fin&&(this._firstFragment=!0),s){const e={fin:t.fin,rsv1:a,opcode:o,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,e,r]):this.dispatch(i,this._compress,e,r)}else this.sendFrame(l.frame(i,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:c.readOnly}),r)}dispatch(e,t,r,i){if(!t)return void this.sendFrame(l.frame(e,r),i);const s=this._extensions[n.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,s.compress(e,r.fin,((t,n)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof i&&i(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];"function"==typeof r&&r(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,r.readOnly=!1,this.sendFrame(l.frame(n,r),i),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=l},404:(e,t,r)=>{"use strict";const{Duplex:i}=r(2781);function n(e){e.emit("close")}function s(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0,a=!0;function c(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",c)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",c));const h=new i({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,i){const n=!i&&h._readableState.objectMode?t.toString():t;h.push(n)||(r=!1,e._socket.pause())})),e.once("error",(function(e){h.destroyed||(a=!1,h.destroy(e))})),e.once("close",(function(){h.destroyed||h.push(null)})),h._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(n,h);let i=!1;e.once("error",(function(e){i=!0,r(e)})),e.once("close",(function(){i||r(t),process.nextTick(n,h)})),a&&e.terminate()},h._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),h._readableState.endEmitted&&h.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){h._final(t)}))},h._read=function(){e.readyState!==e.OPEN||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},h._write=function(t,r,i){e.readyState!==e.CONNECTING?e.send(t,i):e.once("open",(function(){h._write(t,r,i)}))},h.on("end",s),h.on("error",o),h}},640:(e,t,r)=>{"use strict";const{tokenChars:i}=r(6746);e.exports={parse:function(e){const t=new Set;let r=-1,n=-1,s=0;for(;s<e.length;s++){const o=e.charCodeAt(s);if(-1===n&&1===i[o])-1===r&&(r=s);else if(0===s||32!==o&&9!==o){if(44!==o)throw new SyntaxError(`Unexpected character at index ${s}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${s}`);-1===n&&(n=s);const i=e.slice(r,n);if(t.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);t.add(i),r=n=-1}}else-1===n&&-1!==r&&(n=s)}if(-1===r||-1!==n)throw new SyntaxError("Unexpected end of input");const o=e.slice(r,s);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}}},6746:(e,t,r)=>{"use strict";const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function n(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function s(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}try{const t=r(7838);e.exports={isValidStatusCode:n,isValidUTF8:e=>e.length<150?s(e):t(e),tokenChars:i}}catch(t){e.exports={isValidStatusCode:n,isValidUTF8:s,tokenChars:i}}},9284:(e,t,r)=>{"use strict";const i=r(2361),n=r(3685),{createHash:s}=(r(5687),r(1808),r(4404),r(6113)),o=r(1503),a=r(5196),c=r(640),h=r(8762),{GUID:l,kWebSocket:u}=r(1872),f=/^[+/0-9A-Za-z]{22}==$/;function d(e){e._state=2,e.emit("close")}function p(){this.destroy()}function _(e,t,r,i){e.writable&&(r=r||n.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},e.write(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r\n`+Object.keys(i).map((e=>`${e}: ${i[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",p),e.destroy()}e.exports=class extends i{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer(((e,t)=>{const r=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,i)=>{this.handleUpgrade(t,r,i,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(d,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(d,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{d(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,i){t.on("error",p);const n=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"],s=+e.headers["sec-websocket-version"];if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!n||!f.test(n)||8!==s&&13!==s||!this.shouldHandle(e))return _(t,400);const h=e.headers["sec-websocket-protocol"];let l=new Set;if(void 0!==h)try{l=c.parse(h)}catch(e){return _(t,400)}const u=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&void 0!==u){const e=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=o.parse(u);t[a.extensionName]&&(e.accept(t[a.extensionName]),d[a.extensionName]=e)}catch(e){return _(t,400)}}if(this.options.verifyClient){const o={origin:e.headers[8===s?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,((s,o,a,c)=>{if(!s)return _(t,o||401,a,c);this.completeUpgrade(d,n,l,e,t,r,i)}));if(!this.options.verifyClient(o))return _(t,401)}this.completeUpgrade(d,n,l,e,t,r,i)}completeUpgrade(e,t,r,i,n,c,f){if(!n.readable||!n.writable)return n.destroy();if(n[u])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return _(n,503);const m=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(t+l).digest("base64")}`],y=new h(null);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,i):r.values().next().value;e&&(m.push(`Sec-WebSocket-Protocol: ${e}`),y._protocol=e)}if(e[a.extensionName]){const t=e[a.extensionName].params,r=o.format({[a.extensionName]:[t]});m.push(`Sec-WebSocket-Extensions: ${r}`),y._extensions=e}this.emit("headers",m,i),n.write(m.concat("\r\n").join("\r\n")),n.removeListener("error",p),y.setSocket(n,c,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(y),y.on("close",(()=>{this.clients.delete(y),this._shouldEmitClose&&!this.clients.size&&process.nextTick(d,this)}))),f(y,i)}}},8762:(e,t,r)=>{"use strict";const i=r(2361),n=r(5687),s=r(3685),o=r(1808),a=r(4404),{randomBytes:c,createHash:h}=r(6113),{Readable:l}=r(2781),{URL:u}=r(7310),f=r(5196),d=r(2957),p=r(7330),{BINARY_TYPES:_,EMPTY_BUFFER:m,GUID:y,kForOnEventAttribute:g,kListener:v,kStatusCode:b,kWebSocket:w,NOOP:E}=r(1872),{EventTarget:{addEventListener:S,removeEventListener:k}}=r(62),{format:x,parse:O}=r(1503),{toBuffer:N}=r(977),T=["CONNECTING","OPEN","CLOSING","CLOSED"],C=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,L=[8,13];class A extends i{constructor(e,t,r){super(),this._binaryType=_[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=m,this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=A.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),P(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){_.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const i=new d({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new p(e,this._extensions),this._receiver=i,this._socket=e,i[w]=this,e[w]=this,i.on("conclude",M),i.on("drain",B),i.on("error",U),i.on("message",W),i.on("ping",$),i.on("pong",G),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",V),e.on("data",z),e.on("end",Y),e.on("error",H),this._readyState=A.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=A.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=A.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return I(this,this._req,e)}this.readyState!==A.CLOSING?(this._readyState=A.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}ping(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||m,t,r)):D(this,e,r)}pong(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||m,t,r)):D(this,e,r)}send(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==A.OPEN)return void D(this,e,r);const i={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(i.compress=!1),this._sender.send(e||m,i,r)}terminate(){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return I(this,this._req,e)}this._socket&&(this._readyState=A.CLOSING,this._socket.destroy())}}}function P(e,t,r,i){const o={protocolVersion:L[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!L.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${L.join(", ")})`);let a;if(t instanceof u)a=t,e._url=t.href;else{try{a=new u(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const l="wss:"===a.protocol,d="ws+unix:"===a.protocol;if("ws:"!==a.protocol&&!l&&!d)throw new SyntaxError('The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"');if(d&&!a.pathname)throw new SyntaxError("The URL's pathname is empty");if(a.hash)throw new SyntaxError("The URL contains a fragment identifier");const p=l?443:80,_=c(16).toString("base64"),m=l?n.get:s.get,g=new Set;let v;if(o.createConnection=l?j:R,o.defaultPort=o.defaultPort||p,o.port=a.port||p,o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,o.headers={"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":_,Connection:"Upgrade",Upgrade:"websocket",...o.headers},o.path=a.pathname+a.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(v=new f(!0!==o.perMessageDeflate?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=x({[f.extensionName]:v.offer()})),r.length){for(const e of r){if("string"!=typeof e||!C.test(e)||g.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");g.add(e)}o.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(a.username||a.password)&&(o.auth=`${a.username}:${a.password}`),d){const e=o.path.split(":");o.socketPath=e[0],o.path=e[1]}let b=e._req=m(o);o.timeout&&b.on("timeout",(()=>{I(e,b,"Opening handshake has timed out")})),b.on("error",(t=>{null===b||b.aborted||(b=e._req=null,e._readyState=A.CLOSING,e.emit("error",t),e.emitClose())})),b.on("response",(n=>{const s=n.headers.location,a=n.statusCode;if(s&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects)return void I(e,b,"Maximum redirects exceeded");b.abort();const n=new u(s,t);P(e,n,r,i)}else e.emit("unexpected-response",b,n)||I(e,b,`Unexpected server response: ${n.statusCode}`)})),b.on("upgrade",((t,r,i)=>{if(e.emit("upgrade",t),e.readyState!==A.CONNECTING)return;b=e._req=null;const n=h("sha1").update(_+y).digest("base64");if(t.headers["sec-websocket-accept"]!==n)return void I(e,r,"Invalid Sec-WebSocket-Accept header");const s=t.headers["sec-websocket-protocol"];let a;if(void 0!==s?g.size?g.has(s)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":g.size&&(a="Server sent no subprotocol"),a)return void I(e,r,a);s&&(e._protocol=s);const c=t.headers["sec-websocket-extensions"];if(void 0!==c){if(!v)return void I(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=O(c)}catch(t){return void I(e,r,"Invalid Sec-WebSocket-Extensions header")}const i=Object.keys(t);if(1!==i.length||i[0]!==f.extensionName)return void I(e,r,"Server indicated an extension that was not requested");try{v.accept(t[f.extensionName])}catch(t){return void I(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=v}e.setSocket(r,i,{maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})}))}function R(e){return e.path=e.socketPath,o.connect(e)}function j(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=o.isIP(e.host)?"":e.host),a.connect(e)}function I(e,t,r){e._readyState=A.CLOSING;const i=new Error(r);Error.captureStackTrace(i,I),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function D(e,t,r){if(t){const r=N(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}r&&r(new Error(`WebSocket is not open: readyState ${e.readyState} (${T[e.readyState]})`))}function M(e,t){const r=this[w];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[w]&&(r._socket.removeListener("data",z),process.nextTick(q,r._socket),1005===e?r.close():r.close(e,t))}function B(){this[w]._socket.resume()}function U(e){const t=this[w];void 0!==t._socket[w]&&(t._socket.removeListener("data",z),process.nextTick(q,t._socket),t.close(e[b])),t.emit("error",e)}function F(){this[w].emitClose()}function W(e,t){this[w].emit("message",e,t)}function $(e){const t=this[w];t.pong(e,!t._isServer,E),t.emit("ping",e)}function G(e){this[w].emit("pong",e)}function q(e){e.resume()}function V(){const e=this[w];let t;this.removeListener("close",V),this.removeListener("data",z),this.removeListener("end",Y),e._readyState=A.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[w]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",F),e._receiver.on("finish",F))}function z(e){this[w]._receiver.write(e)||this.pause()}function Y(){const e=this[w];e._readyState=A.CLOSING,e._receiver.end(),this.end()}function H(){const e=this[w];this.removeListener("error",H),this.on("error",E),e&&(e._readyState=A.CLOSING,this.destroy())}Object.defineProperty(A,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(A.prototype,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(A,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(A.prototype,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(A,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(A.prototype,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(A,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),Object.defineProperty(A.prototype,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(A.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(A.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[g])return t[v];return null},set(t){for(const t of this.listeners(e))if(t[g]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[g]:!0})}})})),A.prototype.addEventListener=S,A.prototype.removeEventListener=k,e.exports=A},8447:e=>{"use strict";e.exports=require("bufferutil")},7838:e=>{"use strict";e.exports=require("utf-8-validate")},9496:e=>{"use strict";e.exports=require("vscode")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")}},t={},r=function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,r),s.exports}(112);module.exports=r})();