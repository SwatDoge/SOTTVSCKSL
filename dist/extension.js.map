{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://krunkscript-linker/./node_modules/balanced-match/index.js","webpack://krunkscript-linker/./node_modules/brace-expansion/index.js","webpack://krunkscript-linker/./node_modules/concat-map/index.js","webpack://krunkscript-linker/./node_modules/fs.realpath/index.js","webpack://krunkscript-linker/./node_modules/fs.realpath/old.js","webpack://krunkscript-linker/./node_modules/glob/common.js","webpack://krunkscript-linker/./node_modules/glob/glob.js","webpack://krunkscript-linker/./node_modules/glob/sync.js","webpack://krunkscript-linker/./node_modules/inflight/inflight.js","webpack://krunkscript-linker/./node_modules/inherits/inherits.js","webpack://krunkscript-linker/./node_modules/inherits/inherits_browser.js","webpack://krunkscript-linker/./node_modules/minimatch/minimatch.js","webpack://krunkscript-linker/./node_modules/once/once.js","webpack://krunkscript-linker/./node_modules/path-is-absolute/index.js","webpack://krunkscript-linker/./node_modules/rimraf/rimraf.js","webpack://krunkscript-linker/./node_modules/tmp/lib/tmp.js","webpack://krunkscript-linker/./src/extension.ts","webpack://krunkscript-linker/./src/modules/servers/establish_server.ts","webpack://krunkscript-linker/./src/modules/servers/main.ts","webpack://krunkscript-linker/./src/modules/servers/sync_server.ts","webpack://krunkscript-linker/./src/modules/websocket_callback/main.ts","webpack://krunkscript-linker/./src/modules/websocket_callback/up_sync.ts","webpack://krunkscript-linker/./node_modules/wrappy/wrappy.js","webpack://krunkscript-linker/./node_modules/ws/index.js","webpack://krunkscript-linker/./node_modules/ws/lib/buffer-util.js","webpack://krunkscript-linker/./node_modules/ws/lib/constants.js","webpack://krunkscript-linker/./node_modules/ws/lib/event-target.js","webpack://krunkscript-linker/./node_modules/ws/lib/extension.js","webpack://krunkscript-linker/./node_modules/ws/lib/limiter.js","webpack://krunkscript-linker/./node_modules/ws/lib/permessage-deflate.js","webpack://krunkscript-linker/./node_modules/ws/lib/receiver.js","webpack://krunkscript-linker/./node_modules/ws/lib/sender.js","webpack://krunkscript-linker/./node_modules/ws/lib/stream.js","webpack://krunkscript-linker/./node_modules/ws/lib/subprotocol.js","webpack://krunkscript-linker/./node_modules/ws/lib/validation.js","webpack://krunkscript-linker/./node_modules/ws/lib/websocket-server.js","webpack://krunkscript-linker/./node_modules/ws/lib/websocket.js","webpack://krunkscript-linker/external commonjs \"bufferutil\"","webpack://krunkscript-linker/external commonjs \"utf-8-validate\"","webpack://krunkscript-linker/external commonjs \"vscode\"","webpack://krunkscript-linker/external node-commonjs \"assert\"","webpack://krunkscript-linker/external node-commonjs \"crypto\"","webpack://krunkscript-linker/external node-commonjs \"events\"","webpack://krunkscript-linker/external node-commonjs \"fs\"","webpack://krunkscript-linker/external node-commonjs \"http\"","webpack://krunkscript-linker/external node-commonjs \"https\"","webpack://krunkscript-linker/external node-commonjs \"net\"","webpack://krunkscript-linker/external node-commonjs \"os\"","webpack://krunkscript-linker/external node-commonjs \"path\"","webpack://krunkscript-linker/external node-commonjs \"stream\"","webpack://krunkscript-linker/external node-commonjs \"tls\"","webpack://krunkscript-linker/external node-commonjs \"url\"","webpack://krunkscript-linker/external node-commonjs \"util\"","webpack://krunkscript-linker/external node-commonjs \"zlib\"","webpack://krunkscript-linker/webpack/bootstrap","webpack://krunkscript-linker/webpack/startup"],"sourcesContent":["'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    if(a===b) {\n      return [ai, bi];\n    }\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","var concatMap = require('concat-map');\nvar balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction identity(e) {\n  return e;\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m || /\\$$/.test(m.pre)) return [str];\n\n  var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isSequence = isNumericSequence || isAlphaSequence;\n  var isOptions = m.body.indexOf(',') >= 0;\n  if (!isSequence && !isOptions) {\n    // {a},b}\n    if (m.post.match(/,.*\\}/)) {\n      str = m.pre + '{' + m.body + escClose + m.post;\n      return expand(str);\n    }\n    return [str];\n  }\n\n  var n;\n  if (isSequence) {\n    n = m.body.split(/\\.\\./);\n  } else {\n    n = parseCommaParts(m.body);\n    if (n.length === 1) {\n      // x{{a,b}}y ==> x{a}y x{b}y\n      n = expand(n[0], false).map(embrace);\n      if (n.length === 1) {\n        var post = m.post.length\n          ? expand(m.post, false)\n          : [''];\n        return post.map(function(p) {\n          return m.pre + n[0] + p;\n        });\n      }\n    }\n  }\n\n  // at this point, n is the parts, and we know it's not a comma set\n  // with a single entry.\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  var N;\n\n  if (isSequence) {\n    var x = numeric(n[0]);\n    var y = numeric(n[1]);\n    var width = Math.max(n[0].length, n[1].length)\n    var incr = n.length == 3\n      ? Math.abs(numeric(n[2]))\n      : 1;\n    var test = lte;\n    var reverse = y < x;\n    if (reverse) {\n      incr *= -1;\n      test = gte;\n    }\n    var pad = n.some(isPadded);\n\n    N = [];\n\n    for (var i = x; test(i, y); i += incr) {\n      var c;\n      if (isAlphaSequence) {\n        c = String.fromCharCode(i);\n        if (c === '\\\\')\n          c = '';\n      } else {\n        c = String(i);\n        if (pad) {\n          var need = width - c.length;\n          if (need > 0) {\n            var z = new Array(need + 1).join('0');\n            if (i < 0)\n              c = '-' + z + c.slice(1);\n            else\n              c = z + c;\n          }\n        }\n      }\n      N.push(c);\n    }\n  } else {\n    N = concatMap(n, function(el) { return expand(el, false) });\n  }\n\n  for (var j = 0; j < N.length; j++) {\n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre + N[j] + post[k];\n      if (!isTop || isSequence || expansion)\n        expansions.push(expansion);\n    }\n  }\n\n  return expansions;\n}\n\n","module.exports = function (xs, fn) {\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        var x = fn(xs[i], i);\n        if (isArray(x)) res.push.apply(res, x);\n        else res.push(x);\n    }\n    return res;\n};\n\nvar isArray = Array.isArray || function (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","module.exports = realpath\nrealpath.realpath = realpath\nrealpath.sync = realpathSync\nrealpath.realpathSync = realpathSync\nrealpath.monkeypatch = monkeypatch\nrealpath.unmonkeypatch = unmonkeypatch\n\nvar fs = require('fs')\nvar origRealpath = fs.realpath\nvar origRealpathSync = fs.realpathSync\n\nvar version = process.version\nvar ok = /^v[0-5]\\./.test(version)\nvar old = require('./old.js')\n\nfunction newError (er) {\n  return er && er.syscall === 'realpath' && (\n    er.code === 'ELOOP' ||\n    er.code === 'ENOMEM' ||\n    er.code === 'ENAMETOOLONG'\n  )\n}\n\nfunction realpath (p, cache, cb) {\n  if (ok) {\n    return origRealpath(p, cache, cb)\n  }\n\n  if (typeof cache === 'function') {\n    cb = cache\n    cache = null\n  }\n  origRealpath(p, cache, function (er, result) {\n    if (newError(er)) {\n      old.realpath(p, cache, cb)\n    } else {\n      cb(er, result)\n    }\n  })\n}\n\nfunction realpathSync (p, cache) {\n  if (ok) {\n    return origRealpathSync(p, cache)\n  }\n\n  try {\n    return origRealpathSync(p, cache)\n  } catch (er) {\n    if (newError(er)) {\n      return old.realpathSync(p, cache)\n    } else {\n      throw er\n    }\n  }\n}\n\nfunction monkeypatch () {\n  fs.realpath = realpath\n  fs.realpathSync = realpathSync\n}\n\nfunction unmonkeypatch () {\n  fs.realpath = origRealpath\n  fs.realpathSync = origRealpathSync\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar pathModule = require('path');\nvar isWindows = process.platform === 'win32';\nvar fs = require('fs');\n\n// JavaScript implementation of realpath, ported from node pre-v6\n\nvar DEBUG = process.env.NODE_DEBUG && /fs/.test(process.env.NODE_DEBUG);\n\nfunction rethrow() {\n  // Only enable in debug mode. A backtrace uses ~1000 bytes of heap space and\n  // is fairly slow to generate.\n  var callback;\n  if (DEBUG) {\n    var backtrace = new Error;\n    callback = debugCallback;\n  } else\n    callback = missingCallback;\n\n  return callback;\n\n  function debugCallback(err) {\n    if (err) {\n      backtrace.message = err.message;\n      err = backtrace;\n      missingCallback(err);\n    }\n  }\n\n  function missingCallback(err) {\n    if (err) {\n      if (process.throwDeprecation)\n        throw err;  // Forgot a callback but don't know where? Use NODE_DEBUG=fs\n      else if (!process.noDeprecation) {\n        var msg = 'fs: missing callback ' + (err.stack || err.message);\n        if (process.traceDeprecation)\n          console.trace(msg);\n        else\n          console.error(msg);\n      }\n    }\n  }\n}\n\nfunction maybeCallback(cb) {\n  return typeof cb === 'function' ? cb : rethrow();\n}\n\nvar normalize = pathModule.normalize;\n\n// Regexp that finds the next partion of a (partial) path\n// result is [base_with_slash, base], e.g. ['somedir/', 'somedir']\nif (isWindows) {\n  var nextPartRe = /(.*?)(?:[\\/\\\\]+|$)/g;\n} else {\n  var nextPartRe = /(.*?)(?:[\\/]+|$)/g;\n}\n\n// Regex to find the device root, including trailing slash. E.g. 'c:\\\\'.\nif (isWindows) {\n  var splitRootRe = /^(?:[a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?[\\\\\\/]*/;\n} else {\n  var splitRootRe = /^[\\/]*/;\n}\n\nexports.realpathSync = function realpathSync(p, cache) {\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return cache[p];\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstatSync(base);\n      knownHard[base] = true;\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  // NB: p.length changes.\n  while (pos < p.length) {\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      continue;\n    }\n\n    var resolvedLink;\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // some known symbolic link.  no need to stat again.\n      resolvedLink = cache[base];\n    } else {\n      var stat = fs.lstatSync(base);\n      if (!stat.isSymbolicLink()) {\n        knownHard[base] = true;\n        if (cache) cache[base] = base;\n        continue;\n      }\n\n      // read the link if it wasn't read before\n      // dev/ino always return 0 on windows, so skip the check.\n      var linkTarget = null;\n      if (!isWindows) {\n        var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n        if (seenLinks.hasOwnProperty(id)) {\n          linkTarget = seenLinks[id];\n        }\n      }\n      if (linkTarget === null) {\n        fs.statSync(base);\n        linkTarget = fs.readlinkSync(base);\n      }\n      resolvedLink = pathModule.resolve(previous, linkTarget);\n      // track this, if given a cache.\n      if (cache) cache[base] = resolvedLink;\n      if (!isWindows) seenLinks[id] = linkTarget;\n    }\n\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n\n  if (cache) cache[original] = p;\n\n  return p;\n};\n\n\nexports.realpath = function realpath(p, cache, cb) {\n  if (typeof cb !== 'function') {\n    cb = maybeCallback(cache);\n    cache = null;\n  }\n\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return process.nextTick(cb.bind(null, null, cache[p]));\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstat(base, function(err) {\n        if (err) return cb(err);\n        knownHard[base] = true;\n        LOOP();\n      });\n    } else {\n      process.nextTick(LOOP);\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  function LOOP() {\n    // stop if scanned past end of path\n    if (pos >= p.length) {\n      if (cache) cache[original] = p;\n      return cb(null, p);\n    }\n\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      return process.nextTick(LOOP);\n    }\n\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // known symbolic link.  no need to stat again.\n      return gotResolvedLink(cache[base]);\n    }\n\n    return fs.lstat(base, gotStat);\n  }\n\n  function gotStat(err, stat) {\n    if (err) return cb(err);\n\n    // if not a symlink, skip to the next path part\n    if (!stat.isSymbolicLink()) {\n      knownHard[base] = true;\n      if (cache) cache[base] = base;\n      return process.nextTick(LOOP);\n    }\n\n    // stat & read the link if not read before\n    // call gotTarget as soon as the link target is known\n    // dev/ino always return 0 on windows, so skip the check.\n    if (!isWindows) {\n      var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n      if (seenLinks.hasOwnProperty(id)) {\n        return gotTarget(null, seenLinks[id], base);\n      }\n    }\n    fs.stat(base, function(err) {\n      if (err) return cb(err);\n\n      fs.readlink(base, function(err, target) {\n        if (!isWindows) seenLinks[id] = target;\n        gotTarget(err, target);\n      });\n    });\n  }\n\n  function gotTarget(err, target, base) {\n    if (err) return cb(err);\n\n    var resolvedLink = pathModule.resolve(previous, target);\n    if (cache) cache[base] = resolvedLink;\n    gotResolvedLink(resolvedLink);\n  }\n\n  function gotResolvedLink(resolvedLink) {\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n};\n","exports.setopts = setopts\nexports.ownProp = ownProp\nexports.makeAbs = makeAbs\nexports.finish = finish\nexports.mark = mark\nexports.isIgnored = isIgnored\nexports.childrenIgnored = childrenIgnored\n\nfunction ownProp (obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field)\n}\n\nvar fs = require(\"fs\")\nvar path = require(\"path\")\nvar minimatch = require(\"minimatch\")\nvar isAbsolute = require(\"path-is-absolute\")\nvar Minimatch = minimatch.Minimatch\n\nfunction alphasort (a, b) {\n  return a.localeCompare(b, 'en')\n}\n\nfunction setupIgnores (self, options) {\n  self.ignore = options.ignore || []\n\n  if (!Array.isArray(self.ignore))\n    self.ignore = [self.ignore]\n\n  if (self.ignore.length) {\n    self.ignore = self.ignore.map(ignoreMap)\n  }\n}\n\n// ignore patterns are always in dot:true mode.\nfunction ignoreMap (pattern) {\n  var gmatcher = null\n  if (pattern.slice(-3) === '/**') {\n    var gpattern = pattern.replace(/(\\/\\*\\*)+$/, '')\n    gmatcher = new Minimatch(gpattern, { dot: true })\n  }\n\n  return {\n    matcher: new Minimatch(pattern, { dot: true }),\n    gmatcher: gmatcher\n  }\n}\n\nfunction setopts (self, pattern, options) {\n  if (!options)\n    options = {}\n\n  // base-matching: just use globstar for that.\n  if (options.matchBase && -1 === pattern.indexOf(\"/\")) {\n    if (options.noglobstar) {\n      throw new Error(\"base matching requires globstar\")\n    }\n    pattern = \"**/\" + pattern\n  }\n\n  self.silent = !!options.silent\n  self.pattern = pattern\n  self.strict = options.strict !== false\n  self.realpath = !!options.realpath\n  self.realpathCache = options.realpathCache || Object.create(null)\n  self.follow = !!options.follow\n  self.dot = !!options.dot\n  self.mark = !!options.mark\n  self.nodir = !!options.nodir\n  if (self.nodir)\n    self.mark = true\n  self.sync = !!options.sync\n  self.nounique = !!options.nounique\n  self.nonull = !!options.nonull\n  self.nosort = !!options.nosort\n  self.nocase = !!options.nocase\n  self.stat = !!options.stat\n  self.noprocess = !!options.noprocess\n  self.absolute = !!options.absolute\n  self.fs = options.fs || fs\n\n  self.maxLength = options.maxLength || Infinity\n  self.cache = options.cache || Object.create(null)\n  self.statCache = options.statCache || Object.create(null)\n  self.symlinks = options.symlinks || Object.create(null)\n\n  setupIgnores(self, options)\n\n  self.changedCwd = false\n  var cwd = process.cwd()\n  if (!ownProp(options, \"cwd\"))\n    self.cwd = cwd\n  else {\n    self.cwd = path.resolve(options.cwd)\n    self.changedCwd = self.cwd !== cwd\n  }\n\n  self.root = options.root || path.resolve(self.cwd, \"/\")\n  self.root = path.resolve(self.root)\n  if (process.platform === \"win32\")\n    self.root = self.root.replace(/\\\\/g, \"/\")\n\n  // TODO: is an absolute `cwd` supposed to be resolved against `root`?\n  // e.g. { cwd: '/test', root: __dirname } === path.join(__dirname, '/test')\n  self.cwdAbs = isAbsolute(self.cwd) ? self.cwd : makeAbs(self, self.cwd)\n  if (process.platform === \"win32\")\n    self.cwdAbs = self.cwdAbs.replace(/\\\\/g, \"/\")\n  self.nomount = !!options.nomount\n\n  // disable comments and negation in Minimatch.\n  // Note that they are not supported in Glob itself anyway.\n  options.nonegate = true\n  options.nocomment = true\n\n  self.minimatch = new Minimatch(pattern, options)\n  self.options = self.minimatch.options\n}\n\nfunction finish (self) {\n  var nou = self.nounique\n  var all = nou ? [] : Object.create(null)\n\n  for (var i = 0, l = self.matches.length; i < l; i ++) {\n    var matches = self.matches[i]\n    if (!matches || Object.keys(matches).length === 0) {\n      if (self.nonull) {\n        // do like the shell, and spit out the literal glob\n        var literal = self.minimatch.globSet[i]\n        if (nou)\n          all.push(literal)\n        else\n          all[literal] = true\n      }\n    } else {\n      // had matches\n      var m = Object.keys(matches)\n      if (nou)\n        all.push.apply(all, m)\n      else\n        m.forEach(function (m) {\n          all[m] = true\n        })\n    }\n  }\n\n  if (!nou)\n    all = Object.keys(all)\n\n  if (!self.nosort)\n    all = all.sort(alphasort)\n\n  // at *some* point we statted all of these\n  if (self.mark) {\n    for (var i = 0; i < all.length; i++) {\n      all[i] = self._mark(all[i])\n    }\n    if (self.nodir) {\n      all = all.filter(function (e) {\n        var notDir = !(/\\/$/.test(e))\n        var c = self.cache[e] || self.cache[makeAbs(self, e)]\n        if (notDir && c)\n          notDir = c !== 'DIR' && !Array.isArray(c)\n        return notDir\n      })\n    }\n  }\n\n  if (self.ignore.length)\n    all = all.filter(function(m) {\n      return !isIgnored(self, m)\n    })\n\n  self.found = all\n}\n\nfunction mark (self, p) {\n  var abs = makeAbs(self, p)\n  var c = self.cache[abs]\n  var m = p\n  if (c) {\n    var isDir = c === 'DIR' || Array.isArray(c)\n    var slash = p.slice(-1) === '/'\n\n    if (isDir && !slash)\n      m += '/'\n    else if (!isDir && slash)\n      m = m.slice(0, -1)\n\n    if (m !== p) {\n      var mabs = makeAbs(self, m)\n      self.statCache[mabs] = self.statCache[abs]\n      self.cache[mabs] = self.cache[abs]\n    }\n  }\n\n  return m\n}\n\n// lotta situps...\nfunction makeAbs (self, f) {\n  var abs = f\n  if (f.charAt(0) === '/') {\n    abs = path.join(self.root, f)\n  } else if (isAbsolute(f) || f === '') {\n    abs = f\n  } else if (self.changedCwd) {\n    abs = path.resolve(self.cwd, f)\n  } else {\n    abs = path.resolve(f)\n  }\n\n  if (process.platform === 'win32')\n    abs = abs.replace(/\\\\/g, '/')\n\n  return abs\n}\n\n\n// Return true, if pattern ends with globstar '**', for the accompanying parent directory.\n// Ex:- If node_modules/** is the pattern, add 'node_modules' to ignore list along with it's contents\nfunction isIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return item.matcher.match(path) || !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n\nfunction childrenIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n","// Approach:\n//\n// 1. Get the minimatch set\n// 2. For each pattern in the set, PROCESS(pattern, false)\n// 3. Store matches per-set, then uniq them\n//\n// PROCESS(pattern, inGlobStar)\n// Get the first [n] items from pattern that are all strings\n// Join these together.  This is PREFIX.\n//   If there is no more remaining, then stat(PREFIX) and\n//   add to matches if it succeeds.  END.\n//\n// If inGlobStar and PREFIX is symlink and points to dir\n//   set ENTRIES = []\n// else readdir(PREFIX) as ENTRIES\n//   If fail, END\n//\n// with ENTRIES\n//   If pattern[n] is GLOBSTAR\n//     // handle the case where the globstar match is empty\n//     // by pruning it out, and testing the resulting pattern\n//     PROCESS(pattern[0..n] + pattern[n+1 .. $], false)\n//     // handle other cases.\n//     for ENTRY in ENTRIES (not dotfiles)\n//       // attach globstar + tail onto the entry\n//       // Mark that this entry is a globstar match\n//       PROCESS(pattern[0..n] + ENTRY + pattern[n .. $], true)\n//\n//   else // not globstar\n//     for ENTRY in ENTRIES (not dotfiles, unless pattern[n] is dot)\n//       Test ENTRY against pattern[n]\n//       If fails, continue\n//       If passes, PROCESS(pattern[0..n] + item + pattern[n+1 .. $])\n//\n// Caveat:\n//   Cache all stats and readdirs results to minimize syscall.  Since all\n//   we ever care about is existence and directory-ness, we can just keep\n//   `true` for files, and [children,...] for directories, or `false` for\n//   things that don't exist.\n\nmodule.exports = glob\n\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar inherits = require('inherits')\nvar EE = require('events').EventEmitter\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar globSync = require('./sync.js')\nvar common = require('./common.js')\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar inflight = require('inflight')\nvar util = require('util')\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nvar once = require('once')\n\nfunction glob (pattern, options, cb) {\n  if (typeof options === 'function') cb = options, options = {}\n  if (!options) options = {}\n\n  if (options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return globSync(pattern, options)\n  }\n\n  return new Glob(pattern, options, cb)\n}\n\nglob.sync = globSync\nvar GlobSync = glob.GlobSync = globSync.GlobSync\n\n// old api surface\nglob.glob = glob\n\nfunction extend (origin, add) {\n  if (add === null || typeof add !== 'object') {\n    return origin\n  }\n\n  var keys = Object.keys(add)\n  var i = keys.length\n  while (i--) {\n    origin[keys[i]] = add[keys[i]]\n  }\n  return origin\n}\n\nglob.hasMagic = function (pattern, options_) {\n  var options = extend({}, options_)\n  options.noprocess = true\n\n  var g = new Glob(pattern, options)\n  var set = g.minimatch.set\n\n  if (!pattern)\n    return false\n\n  if (set.length > 1)\n    return true\n\n  for (var j = 0; j < set[0].length; j++) {\n    if (typeof set[0][j] !== 'string')\n      return true\n  }\n\n  return false\n}\n\nglob.Glob = Glob\ninherits(Glob, EE)\nfunction Glob (pattern, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = null\n  }\n\n  if (options && options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return new GlobSync(pattern, options)\n  }\n\n  if (!(this instanceof Glob))\n    return new Glob(pattern, options, cb)\n\n  setopts(this, pattern, options)\n  this._didRealPath = false\n\n  // process each pattern in the minimatch set\n  var n = this.minimatch.set.length\n\n  // The matches are stored as {<filename>: true,...} so that\n  // duplicates are automagically pruned.\n  // Later, we do an Object.keys() on these.\n  // Keep them as a list so we can fill in when nonull is set.\n  this.matches = new Array(n)\n\n  if (typeof cb === 'function') {\n    cb = once(cb)\n    this.on('error', cb)\n    this.on('end', function (matches) {\n      cb(null, matches)\n    })\n  }\n\n  var self = this\n  this._processing = 0\n\n  this._emitQueue = []\n  this._processQueue = []\n  this.paused = false\n\n  if (this.noprocess)\n    return this\n\n  if (n === 0)\n    return done()\n\n  var sync = true\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false, done)\n  }\n  sync = false\n\n  function done () {\n    --self._processing\n    if (self._processing <= 0) {\n      if (sync) {\n        process.nextTick(function () {\n          self._finish()\n        })\n      } else {\n        self._finish()\n      }\n    }\n  }\n}\n\nGlob.prototype._finish = function () {\n  assert(this instanceof Glob)\n  if (this.aborted)\n    return\n\n  if (this.realpath && !this._didRealpath)\n    return this._realpath()\n\n  common.finish(this)\n  this.emit('end', this.found)\n}\n\nGlob.prototype._realpath = function () {\n  if (this._didRealpath)\n    return\n\n  this._didRealpath = true\n\n  var n = this.matches.length\n  if (n === 0)\n    return this._finish()\n\n  var self = this\n  for (var i = 0; i < this.matches.length; i++)\n    this._realpathSet(i, next)\n\n  function next () {\n    if (--n === 0)\n      self._finish()\n  }\n}\n\nGlob.prototype._realpathSet = function (index, cb) {\n  var matchset = this.matches[index]\n  if (!matchset)\n    return cb()\n\n  var found = Object.keys(matchset)\n  var self = this\n  var n = found.length\n\n  if (n === 0)\n    return cb()\n\n  var set = this.matches[index] = Object.create(null)\n  found.forEach(function (p, i) {\n    // If there's a problem with the stat, then it means that\n    // one or more of the links in the realpath couldn't be\n    // resolved.  just return the abs value in that case.\n    p = self._makeAbs(p)\n    rp.realpath(p, self.realpathCache, function (er, real) {\n      if (!er)\n        set[real] = true\n      else if (er.syscall === 'stat')\n        set[p] = true\n      else\n        self.emit('error', er) // srsly wtf right here\n\n      if (--n === 0) {\n        self.matches[index] = set\n        cb()\n      }\n    })\n  })\n}\n\nGlob.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlob.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n\nGlob.prototype.abort = function () {\n  this.aborted = true\n  this.emit('abort')\n}\n\nGlob.prototype.pause = function () {\n  if (!this.paused) {\n    this.paused = true\n    this.emit('pause')\n  }\n}\n\nGlob.prototype.resume = function () {\n  if (this.paused) {\n    this.emit('resume')\n    this.paused = false\n    if (this._emitQueue.length) {\n      var eq = this._emitQueue.slice(0)\n      this._emitQueue.length = 0\n      for (var i = 0; i < eq.length; i ++) {\n        var e = eq[i]\n        this._emitMatch(e[0], e[1])\n      }\n    }\n    if (this._processQueue.length) {\n      var pq = this._processQueue.slice(0)\n      this._processQueue.length = 0\n      for (var i = 0; i < pq.length; i ++) {\n        var p = pq[i]\n        this._processing--\n        this._process(p[0], p[1], p[2], p[3])\n      }\n    }\n  }\n}\n\nGlob.prototype._process = function (pattern, index, inGlobStar, cb) {\n  assert(this instanceof Glob)\n  assert(typeof cb === 'function')\n\n  if (this.aborted)\n    return\n\n  this._processing++\n  if (this.paused) {\n    this._processQueue.push([pattern, index, inGlobStar, cb])\n    return\n  }\n\n  //console.error('PROCESS %d', this._processing, pattern)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // see if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index, cb)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip _processing\n  if (childrenIgnored(this, read))\n    return cb()\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar, cb)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar, cb)\n}\n\nGlob.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    return self._processReaddir2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\nGlob.prototype._processReaddir2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return cb()\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  //console.error('prd2', prefix, entries, remain[0]._glob, matchedEntries)\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return cb()\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return cb()\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix) {\n      if (prefix !== '/')\n        e = prefix + '/' + e\n      else\n        e = prefix + e\n    }\n    this._process([e].concat(remain), index, inGlobStar, cb)\n  }\n  cb()\n}\n\nGlob.prototype._emitMatch = function (index, e) {\n  if (this.aborted)\n    return\n\n  if (isIgnored(this, e))\n    return\n\n  if (this.paused) {\n    this._emitQueue.push([index, e])\n    return\n  }\n\n  var abs = isAbsolute(e) ? e : this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute)\n    e = abs\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  var st = this.statCache[abs]\n  if (st)\n    this.emit('stat', e, st)\n\n  this.emit('match', e)\n}\n\nGlob.prototype._readdirInGlobStar = function (abs, cb) {\n  if (this.aborted)\n    return\n\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false, cb)\n\n  var lstatkey = 'lstat\\0' + abs\n  var self = this\n  var lstatcb = inflight(lstatkey, lstatcb_)\n\n  if (lstatcb)\n    self.fs.lstat(abs, lstatcb)\n\n  function lstatcb_ (er, lstat) {\n    if (er && er.code === 'ENOENT')\n      return cb()\n\n    var isSym = lstat && lstat.isSymbolicLink()\n    self.symlinks[abs] = isSym\n\n    // If it's not a symlink or a dir, then it's definitely a regular file.\n    // don't bother doing a readdir in that case.\n    if (!isSym && lstat && !lstat.isDirectory()) {\n      self.cache[abs] = 'FILE'\n      cb()\n    } else\n      self._readdir(abs, false, cb)\n  }\n}\n\nGlob.prototype._readdir = function (abs, inGlobStar, cb) {\n  if (this.aborted)\n    return\n\n  cb = inflight('readdir\\0'+abs+'\\0'+inGlobStar, cb)\n  if (!cb)\n    return\n\n  //console.error('RD %j %j', +inGlobStar, abs)\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs, cb)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return cb()\n\n    if (Array.isArray(c))\n      return cb(null, c)\n  }\n\n  var self = this\n  self.fs.readdir(abs, readdirCb(this, abs, cb))\n}\n\nfunction readdirCb (self, abs, cb) {\n  return function (er, entries) {\n    if (er)\n      self._readdirError(abs, er, cb)\n    else\n      self._readdirEntries(abs, entries, cb)\n  }\n}\n\nGlob.prototype._readdirEntries = function (abs, entries, cb) {\n  if (this.aborted)\n    return\n\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n  return cb(null, entries)\n}\n\nGlob.prototype._readdirError = function (f, er, cb) {\n  if (this.aborted)\n    return\n\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        this.emit('error', error)\n        this.abort()\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict) {\n        this.emit('error', er)\n        // If the error is handled, then we abort\n        // if not, we threw out of here\n        this.abort()\n      }\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n\n  return cb()\n}\n\nGlob.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    self._processGlobStar2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\n\nGlob.prototype._processGlobStar2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n  //console.error('pgs2', prefix, remain[0], entries)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return cb()\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false, cb)\n\n  var isSym = this.symlinks[abs]\n  var len = entries.length\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return cb()\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true, cb)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true, cb)\n  }\n\n  cb()\n}\n\nGlob.prototype._processSimple = function (prefix, index, cb) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var self = this\n  this._stat(prefix, function (er, exists) {\n    self._processSimple2(prefix, index, er, exists, cb)\n  })\n}\nGlob.prototype._processSimple2 = function (prefix, index, er, exists, cb) {\n\n  //console.error('ps2', prefix, exists)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return cb()\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n  cb()\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlob.prototype._stat = function (f, cb) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return cb()\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return cb(null, c)\n\n    if (needDir && c === 'FILE')\n      return cb()\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (stat !== undefined) {\n    if (stat === false)\n      return cb(null, stat)\n    else {\n      var type = stat.isDirectory() ? 'DIR' : 'FILE'\n      if (needDir && type === 'FILE')\n        return cb()\n      else\n        return cb(null, type, stat)\n    }\n  }\n\n  var self = this\n  var statcb = inflight('stat\\0' + abs, lstatcb_)\n  if (statcb)\n    self.fs.lstat(abs, statcb)\n\n  function lstatcb_ (er, lstat) {\n    if (lstat && lstat.isSymbolicLink()) {\n      // If it's a symlink, then treat it as the target, unless\n      // the target does not exist, then treat it as a file.\n      return self.fs.stat(abs, function (er, stat) {\n        if (er)\n          self._stat2(f, abs, null, lstat, cb)\n        else\n          self._stat2(f, abs, er, stat, cb)\n      })\n    } else {\n      self._stat2(f, abs, er, lstat, cb)\n    }\n  }\n}\n\nGlob.prototype._stat2 = function (f, abs, er, stat, cb) {\n  if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n    this.statCache[abs] = false\n    return cb()\n  }\n\n  var needDir = f.slice(-1) === '/'\n  this.statCache[abs] = stat\n\n  if (abs.slice(-1) === '/' && stat && !stat.isDirectory())\n    return cb(null, false, stat)\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return cb()\n\n  return cb(null, c, stat)\n}\n","module.exports = globSync\nglobSync.GlobSync = GlobSync\n\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar Glob = require('./glob.js').Glob\nvar util = require('util')\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar common = require('./common.js')\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nfunction globSync (pattern, options) {\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  return new GlobSync(pattern, options).found\n}\n\nfunction GlobSync (pattern, options) {\n  if (!pattern)\n    throw new Error('must provide pattern')\n\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  if (!(this instanceof GlobSync))\n    return new GlobSync(pattern, options)\n\n  setopts(this, pattern, options)\n\n  if (this.noprocess)\n    return this\n\n  var n = this.minimatch.set.length\n  this.matches = new Array(n)\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false)\n  }\n  this._finish()\n}\n\nGlobSync.prototype._finish = function () {\n  assert(this instanceof GlobSync)\n  if (this.realpath) {\n    var self = this\n    this.matches.forEach(function (matchset, index) {\n      var set = self.matches[index] = Object.create(null)\n      for (var p in matchset) {\n        try {\n          p = self._makeAbs(p)\n          var real = rp.realpathSync(p, self.realpathCache)\n          set[real] = true\n        } catch (er) {\n          if (er.syscall === 'stat')\n            set[self._makeAbs(p)] = true\n          else\n            throw er\n        }\n      }\n    })\n  }\n  common.finish(this)\n}\n\n\nGlobSync.prototype._process = function (pattern, index, inGlobStar) {\n  assert(this instanceof GlobSync)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // See if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip processing\n  if (childrenIgnored(this, read))\n    return\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar)\n}\n\n\nGlobSync.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar) {\n  var entries = this._readdir(abs, inGlobStar)\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix.slice(-1) !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix)\n      newPattern = [prefix, e]\n    else\n      newPattern = [e]\n    this._process(newPattern.concat(remain), index, inGlobStar)\n  }\n}\n\n\nGlobSync.prototype._emitMatch = function (index, e) {\n  if (isIgnored(this, e))\n    return\n\n  var abs = this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute) {\n    e = abs\n  }\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  if (this.stat)\n    this._stat(e)\n}\n\n\nGlobSync.prototype._readdirInGlobStar = function (abs) {\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false)\n\n  var entries\n  var lstat\n  var stat\n  try {\n    lstat = this.fs.lstatSync(abs)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      // lstat failed, doesn't exist\n      return null\n    }\n  }\n\n  var isSym = lstat && lstat.isSymbolicLink()\n  this.symlinks[abs] = isSym\n\n  // If it's not a symlink or a dir, then it's definitely a regular file.\n  // don't bother doing a readdir in that case.\n  if (!isSym && lstat && !lstat.isDirectory())\n    this.cache[abs] = 'FILE'\n  else\n    entries = this._readdir(abs, false)\n\n  return entries\n}\n\nGlobSync.prototype._readdir = function (abs, inGlobStar) {\n  var entries\n\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return null\n\n    if (Array.isArray(c))\n      return c\n  }\n\n  try {\n    return this._readdirEntries(abs, this.fs.readdirSync(abs))\n  } catch (er) {\n    this._readdirError(abs, er)\n    return null\n  }\n}\n\nGlobSync.prototype._readdirEntries = function (abs, entries) {\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n\n  // mark and cache dir-ness\n  return entries\n}\n\nGlobSync.prototype._readdirError = function (f, er) {\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        throw error\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict)\n        throw er\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n}\n\nGlobSync.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar) {\n\n  var entries = this._readdir(abs, inGlobStar)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false)\n\n  var len = entries.length\n  var isSym = this.symlinks[abs]\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true)\n  }\n}\n\nGlobSync.prototype._processSimple = function (prefix, index) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var exists = this._stat(prefix)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlobSync.prototype._stat = function (f) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return false\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return c\n\n    if (needDir && c === 'FILE')\n      return false\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (!stat) {\n    var lstat\n    try {\n      lstat = this.fs.lstatSync(abs)\n    } catch (er) {\n      if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n        this.statCache[abs] = false\n        return false\n      }\n    }\n\n    if (lstat && lstat.isSymbolicLink()) {\n      try {\n        stat = this.fs.statSync(abs)\n      } catch (er) {\n        stat = lstat\n      }\n    } else {\n      stat = lstat\n    }\n  }\n\n  this.statCache[abs] = stat\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return false\n\n  return c\n}\n\nGlobSync.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlobSync.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n","var wrappy = require('wrappy')\nvar reqs = Object.create(null)\nvar once = require('once')\n\nmodule.exports = wrappy(inflight)\n\nfunction inflight (key, cb) {\n  if (reqs[key]) {\n    reqs[key].push(cb)\n    return null\n  } else {\n    reqs[key] = [cb]\n    return makeres(key)\n  }\n}\n\nfunction makeres (key) {\n  return once(function RES () {\n    var cbs = reqs[key]\n    var len = cbs.length\n    var args = slice(arguments)\n\n    // XXX It's somewhat ambiguous whether a new callback added in this\n    // pass should be queued for later execution if something in the\n    // list of callbacks throws, or if it should just be discarded.\n    // However, it's such an edge case that it hardly matters, and either\n    // choice is likely as surprising as the other.\n    // As it happens, we do go ahead and schedule it for later execution.\n    try {\n      for (var i = 0; i < len; i++) {\n        cbs[i].apply(null, args)\n      }\n    } finally {\n      if (cbs.length > len) {\n        // added more in the interim.\n        // de-zalgo, just in case, but don't call again.\n        cbs.splice(0, len)\n        process.nextTick(function () {\n          RES.apply(null, args)\n        })\n      } else {\n        delete reqs[key]\n      }\n    }\n  })\n}\n\nfunction slice (args) {\n  var length = args.length\n  var array = []\n\n  for (var i = 0; i < length; i++) array[i] = args[i]\n  return array\n}\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","module.exports = minimatch\nminimatch.Minimatch = Minimatch\n\nvar path = { sep: '/' }\ntry {\n  path = require('path')\n} catch (er) {}\n\nvar GLOBSTAR = minimatch.GLOBSTAR = Minimatch.GLOBSTAR = {}\nvar expand = require('brace-expansion')\n\nvar plTypes = {\n  '!': { open: '(?:(?!(?:', close: '))[^/]*?)'},\n  '?': { open: '(?:', close: ')?' },\n  '+': { open: '(?:', close: ')+' },\n  '*': { open: '(?:', close: ')*' },\n  '@': { open: '(?:', close: ')' }\n}\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nvar qmark = '[^/]'\n\n// * => any number of characters\nvar star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nvar twoStarDot = '(?:(?!(?:\\\\\\/|^)(?:\\\\.{1,2})($|\\\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nvar twoStarNoDot = '(?:(?!(?:\\\\\\/|^)\\\\.).)*?'\n\n// characters that need to be escaped in RegExp.\nvar reSpecials = charSet('().*{}+?[]^$\\\\!')\n\n// \"abc\" -> { a:true, b:true, c:true }\nfunction charSet (s) {\n  return s.split('').reduce(function (set, c) {\n    set[c] = true\n    return set\n  }, {})\n}\n\n// normalizes slashes.\nvar slashSplit = /\\/+/\n\nminimatch.filter = filter\nfunction filter (pattern, options) {\n  options = options || {}\n  return function (p, i, list) {\n    return minimatch(p, pattern, options)\n  }\n}\n\nfunction ext (a, b) {\n  a = a || {}\n  b = b || {}\n  var t = {}\n  Object.keys(b).forEach(function (k) {\n    t[k] = b[k]\n  })\n  Object.keys(a).forEach(function (k) {\n    t[k] = a[k]\n  })\n  return t\n}\n\nminimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return minimatch\n\n  var orig = minimatch\n\n  var m = function minimatch (p, pattern, options) {\n    return orig.minimatch(p, pattern, ext(def, options))\n  }\n\n  m.Minimatch = function Minimatch (pattern, options) {\n    return new orig.Minimatch(pattern, ext(def, options))\n  }\n\n  return m\n}\n\nMinimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return Minimatch\n  return minimatch.defaults(def).Minimatch\n}\n\nfunction minimatch (p, pattern, options) {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  // \"\" only matches \"\"\n  if (pattern.trim() === '') return p === ''\n\n  return new Minimatch(pattern, options).match(p)\n}\n\nfunction Minimatch (pattern, options) {\n  if (!(this instanceof Minimatch)) {\n    return new Minimatch(pattern, options)\n  }\n\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n  pattern = pattern.trim()\n\n  // windows support: need to use /, not \\\n  if (path.sep !== '/') {\n    pattern = pattern.split(path.sep).join('/')\n  }\n\n  this.options = options\n  this.set = []\n  this.pattern = pattern\n  this.regexp = null\n  this.negate = false\n  this.comment = false\n  this.empty = false\n\n  // make the set of regexps etc.\n  this.make()\n}\n\nMinimatch.prototype.debug = function () {}\n\nMinimatch.prototype.make = make\nfunction make () {\n  // don't do it more than once.\n  if (this._made) return\n\n  var pattern = this.pattern\n  var options = this.options\n\n  // empty patterns and comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    this.comment = true\n    return\n  }\n  if (!pattern) {\n    this.empty = true\n    return\n  }\n\n  // step 1: figure out negation, etc.\n  this.parseNegate()\n\n  // step 2: expand braces\n  var set = this.globSet = this.braceExpand()\n\n  if (options.debug) this.debug = console.error\n\n  this.debug(this.pattern, set)\n\n  // step 3: now we have a set, so turn each one into a series of path-portion\n  // matching patterns.\n  // These will be regexps, except in the case of \"**\", which is\n  // set to the GLOBSTAR object for globstar behavior,\n  // and will not contain any / characters\n  set = this.globParts = set.map(function (s) {\n    return s.split(slashSplit)\n  })\n\n  this.debug(this.pattern, set)\n\n  // glob --> regexps\n  set = set.map(function (s, si, set) {\n    return s.map(this.parse, this)\n  }, this)\n\n  this.debug(this.pattern, set)\n\n  // filter out everything that didn't compile properly.\n  set = set.filter(function (s) {\n    return s.indexOf(false) === -1\n  })\n\n  this.debug(this.pattern, set)\n\n  this.set = set\n}\n\nMinimatch.prototype.parseNegate = parseNegate\nfunction parseNegate () {\n  var pattern = this.pattern\n  var negate = false\n  var options = this.options\n  var negateOffset = 0\n\n  if (options.nonegate) return\n\n  for (var i = 0, l = pattern.length\n    ; i < l && pattern.charAt(i) === '!'\n    ; i++) {\n    negate = !negate\n    negateOffset++\n  }\n\n  if (negateOffset) this.pattern = pattern.substr(negateOffset)\n  this.negate = negate\n}\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nminimatch.braceExpand = function (pattern, options) {\n  return braceExpand(pattern, options)\n}\n\nMinimatch.prototype.braceExpand = braceExpand\n\nfunction braceExpand (pattern, options) {\n  if (!options) {\n    if (this instanceof Minimatch) {\n      options = this.options\n    } else {\n      options = {}\n    }\n  }\n\n  pattern = typeof pattern === 'undefined'\n    ? this.pattern : pattern\n\n  if (typeof pattern === 'undefined') {\n    throw new TypeError('undefined pattern')\n  }\n\n  if (options.nobrace ||\n    !pattern.match(/\\{.*\\}/)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nMinimatch.prototype.parse = parse\nvar SUBPARSE = {}\nfunction parse (pattern, isSub) {\n  if (pattern.length > 1024 * 64) {\n    throw new TypeError('pattern is too long')\n  }\n\n  var options = this.options\n\n  // shortcuts\n  if (!options.noglobstar && pattern === '**') return GLOBSTAR\n  if (pattern === '') return ''\n\n  var re = ''\n  var hasMagic = !!options.nocase\n  var escaping = false\n  // ? => one single character\n  var patternListStack = []\n  var negativeLists = []\n  var stateChar\n  var inClass = false\n  var reClassStart = -1\n  var classStart = -1\n  // . and .. never match anything that doesn't start with .,\n  // even when options.dot is set.\n  var patternStart = pattern.charAt(0) === '.' ? '' // anything\n  // not (start or / followed by . or .. followed by / or end)\n  : options.dot ? '(?!(?:^|\\\\\\/)\\\\.{1,2}(?:$|\\\\\\/))'\n  : '(?!\\\\.)'\n  var self = this\n\n  function clearStateChar () {\n    if (stateChar) {\n      // we had some state-tracking character\n      // that wasn't consumed by this pass.\n      switch (stateChar) {\n        case '*':\n          re += star\n          hasMagic = true\n        break\n        case '?':\n          re += qmark\n          hasMagic = true\n        break\n        default:\n          re += '\\\\' + stateChar\n        break\n      }\n      self.debug('clearStateChar %j %j', stateChar, re)\n      stateChar = false\n    }\n  }\n\n  for (var i = 0, len = pattern.length, c\n    ; (i < len) && (c = pattern.charAt(i))\n    ; i++) {\n    this.debug('%s\\t%s %s %j', pattern, i, re, c)\n\n    // skip over any that are escaped.\n    if (escaping && reSpecials[c]) {\n      re += '\\\\' + c\n      escaping = false\n      continue\n    }\n\n    switch (c) {\n      case '/':\n        // completely not allowed, even escaped.\n        // Should already be path-split by now.\n        return false\n\n      case '\\\\':\n        clearStateChar()\n        escaping = true\n      continue\n\n      // the various stateChar values\n      // for the \"extglob\" stuff.\n      case '?':\n      case '*':\n      case '+':\n      case '@':\n      case '!':\n        this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c)\n\n        // all of those are literals inside a class, except that\n        // the glob [!a] means [^a] in regexp\n        if (inClass) {\n          this.debug('  in class')\n          if (c === '!' && i === classStart + 1) c = '^'\n          re += c\n          continue\n        }\n\n        // if we already have a stateChar, then it means\n        // that there was something like ** or +? in there.\n        // Handle the stateChar, then proceed with this one.\n        self.debug('call clearStateChar %j', stateChar)\n        clearStateChar()\n        stateChar = c\n        // if extglob is disabled, then +(asdf|foo) isn't a thing.\n        // just clear the statechar *now*, rather than even diving into\n        // the patternList stuff.\n        if (options.noext) clearStateChar()\n      continue\n\n      case '(':\n        if (inClass) {\n          re += '('\n          continue\n        }\n\n        if (!stateChar) {\n          re += '\\\\('\n          continue\n        }\n\n        patternListStack.push({\n          type: stateChar,\n          start: i - 1,\n          reStart: re.length,\n          open: plTypes[stateChar].open,\n          close: plTypes[stateChar].close\n        })\n        // negation is (?:(?!js)[^/]*)\n        re += stateChar === '!' ? '(?:(?!(?:' : '(?:'\n        this.debug('plType %j %j', stateChar, re)\n        stateChar = false\n      continue\n\n      case ')':\n        if (inClass || !patternListStack.length) {\n          re += '\\\\)'\n          continue\n        }\n\n        clearStateChar()\n        hasMagic = true\n        var pl = patternListStack.pop()\n        // negation is (?:(?!js)[^/]*)\n        // The others are (?:<pattern>)<type>\n        re += pl.close\n        if (pl.type === '!') {\n          negativeLists.push(pl)\n        }\n        pl.reEnd = re.length\n      continue\n\n      case '|':\n        if (inClass || !patternListStack.length || escaping) {\n          re += '\\\\|'\n          escaping = false\n          continue\n        }\n\n        clearStateChar()\n        re += '|'\n      continue\n\n      // these are mostly the same in regexp and glob\n      case '[':\n        // swallow any state-tracking char before the [\n        clearStateChar()\n\n        if (inClass) {\n          re += '\\\\' + c\n          continue\n        }\n\n        inClass = true\n        classStart = i\n        reClassStart = re.length\n        re += c\n      continue\n\n      case ']':\n        //  a right bracket shall lose its special\n        //  meaning and represent itself in\n        //  a bracket expression if it occurs\n        //  first in the list.  -- POSIX.2 2.8.3.2\n        if (i === classStart + 1 || !inClass) {\n          re += '\\\\' + c\n          escaping = false\n          continue\n        }\n\n        // handle the case where we left a class open.\n        // \"[z-a]\" is valid, equivalent to \"\\[z-a\\]\"\n        if (inClass) {\n          // split where the last [ was, make sure we don't have\n          // an invalid re. if so, re-walk the contents of the\n          // would-be class to re-translate any characters that\n          // were passed through as-is\n          // TODO: It would probably be faster to determine this\n          // without a try/catch and a new RegExp, but it's tricky\n          // to do safely.  For now, this is safe and works.\n          var cs = pattern.substring(classStart + 1, i)\n          try {\n            RegExp('[' + cs + ']')\n          } catch (er) {\n            // not a valid class!\n            var sp = this.parse(cs, SUBPARSE)\n            re = re.substr(0, reClassStart) + '\\\\[' + sp[0] + '\\\\]'\n            hasMagic = hasMagic || sp[1]\n            inClass = false\n            continue\n          }\n        }\n\n        // finish up the class.\n        hasMagic = true\n        inClass = false\n        re += c\n      continue\n\n      default:\n        // swallow any state char that wasn't consumed\n        clearStateChar()\n\n        if (escaping) {\n          // no need\n          escaping = false\n        } else if (reSpecials[c]\n          && !(c === '^' && inClass)) {\n          re += '\\\\'\n        }\n\n        re += c\n\n    } // switch\n  } // for\n\n  // handle the case where we left a class open.\n  // \"[abc\" is valid, equivalent to \"\\[abc\"\n  if (inClass) {\n    // split where the last [ was, and escape it\n    // this is a huge pita.  We now have to re-walk\n    // the contents of the would-be class to re-translate\n    // any characters that were passed through as-is\n    cs = pattern.substr(classStart + 1)\n    sp = this.parse(cs, SUBPARSE)\n    re = re.substr(0, reClassStart) + '\\\\[' + sp[0]\n    hasMagic = hasMagic || sp[1]\n  }\n\n  // handle the case where we had a +( thing at the *end*\n  // of the pattern.\n  // each pattern list stack adds 3 chars, and we need to go through\n  // and escape any | chars that were passed through as-is for the regexp.\n  // Go through and escape them, taking care not to double-escape any\n  // | chars that were already escaped.\n  for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n    var tail = re.slice(pl.reStart + pl.open.length)\n    this.debug('setting tail', re, pl)\n    // maybe some even number of \\, then maybe 1 \\, followed by a |\n    tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, function (_, $1, $2) {\n      if (!$2) {\n        // the | isn't already escaped, so escape it.\n        $2 = '\\\\'\n      }\n\n      // need to escape all those slashes *again*, without escaping the\n      // one that we need for escaping the | character.  As it works out,\n      // escaping an even number of slashes can be done by simply repeating\n      // it exactly after itself.  That's why this trick works.\n      //\n      // I am sorry that you have to see this.\n      return $1 + $1 + $2 + '|'\n    })\n\n    this.debug('tail=%j\\n   %s', tail, tail, pl, re)\n    var t = pl.type === '*' ? star\n      : pl.type === '?' ? qmark\n      : '\\\\' + pl.type\n\n    hasMagic = true\n    re = re.slice(0, pl.reStart) + t + '\\\\(' + tail\n  }\n\n  // handle trailing things that only matter at the very end.\n  clearStateChar()\n  if (escaping) {\n    // trailing \\\\\n    re += '\\\\\\\\'\n  }\n\n  // only need to apply the nodot start if the re starts with\n  // something that could conceivably capture a dot\n  var addPatternStart = false\n  switch (re.charAt(0)) {\n    case '.':\n    case '[':\n    case '(': addPatternStart = true\n  }\n\n  // Hack to work around lack of negative lookbehind in JS\n  // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n  // like 'a.xyz.yz' doesn't match.  So, the first negative\n  // lookahead, has to look ALL the way ahead, to the end of\n  // the pattern.\n  for (var n = negativeLists.length - 1; n > -1; n--) {\n    var nl = negativeLists[n]\n\n    var nlBefore = re.slice(0, nl.reStart)\n    var nlFirst = re.slice(nl.reStart, nl.reEnd - 8)\n    var nlLast = re.slice(nl.reEnd - 8, nl.reEnd)\n    var nlAfter = re.slice(nl.reEnd)\n\n    nlLast += nlAfter\n\n    // Handle nested stuff like *(*.js|!(*.json)), where open parens\n    // mean that we should *not* include the ) in the bit that is considered\n    // \"after\" the negated section.\n    var openParensBefore = nlBefore.split('(').length - 1\n    var cleanAfter = nlAfter\n    for (i = 0; i < openParensBefore; i++) {\n      cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '')\n    }\n    nlAfter = cleanAfter\n\n    var dollar = ''\n    if (nlAfter === '' && isSub !== SUBPARSE) {\n      dollar = '$'\n    }\n    var newRe = nlBefore + nlFirst + nlAfter + dollar + nlLast\n    re = newRe\n  }\n\n  // if the re is not \"\" at this point, then we need to make sure\n  // it doesn't match against an empty path part.\n  // Otherwise a/* will match a/, which it should not.\n  if (re !== '' && hasMagic) {\n    re = '(?=.)' + re\n  }\n\n  if (addPatternStart) {\n    re = patternStart + re\n  }\n\n  // parsing just a piece of a larger pattern.\n  if (isSub === SUBPARSE) {\n    return [re, hasMagic]\n  }\n\n  // skip the regexp for non-magical patterns\n  // unescape anything in it, though, so that it'll be\n  // an exact match against a file etc.\n  if (!hasMagic) {\n    return globUnescape(pattern)\n  }\n\n  var flags = options.nocase ? 'i' : ''\n  try {\n    var regExp = new RegExp('^' + re + '$', flags)\n  } catch (er) {\n    // If it was an invalid regular expression, then it can't match\n    // anything.  This trick looks for a character after the end of\n    // the string, which is of course impossible, except in multi-line\n    // mode, but it's not a /m regex.\n    return new RegExp('$.')\n  }\n\n  regExp._glob = pattern\n  regExp._src = re\n\n  return regExp\n}\n\nminimatch.makeRe = function (pattern, options) {\n  return new Minimatch(pattern, options || {}).makeRe()\n}\n\nMinimatch.prototype.makeRe = makeRe\nfunction makeRe () {\n  if (this.regexp || this.regexp === false) return this.regexp\n\n  // at this point, this.set is a 2d array of partial\n  // pattern strings, or \"**\".\n  //\n  // It's better to use .match().  This function shouldn't\n  // be used, really, but it's pretty convenient sometimes,\n  // when you just want to work with a regex.\n  var set = this.set\n\n  if (!set.length) {\n    this.regexp = false\n    return this.regexp\n  }\n  var options = this.options\n\n  var twoStar = options.noglobstar ? star\n    : options.dot ? twoStarDot\n    : twoStarNoDot\n  var flags = options.nocase ? 'i' : ''\n\n  var re = set.map(function (pattern) {\n    return pattern.map(function (p) {\n      return (p === GLOBSTAR) ? twoStar\n      : (typeof p === 'string') ? regExpEscape(p)\n      : p._src\n    }).join('\\\\\\/')\n  }).join('|')\n\n  // must match entire pattern\n  // ending in a * or ** will make it less strict.\n  re = '^(?:' + re + ')$'\n\n  // can match anything, as long as it's not this.\n  if (this.negate) re = '^(?!' + re + ').*$'\n\n  try {\n    this.regexp = new RegExp(re, flags)\n  } catch (ex) {\n    this.regexp = false\n  }\n  return this.regexp\n}\n\nminimatch.match = function (list, pattern, options) {\n  options = options || {}\n  var mm = new Minimatch(pattern, options)\n  list = list.filter(function (f) {\n    return mm.match(f)\n  })\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\n\nMinimatch.prototype.match = match\nfunction match (f, partial) {\n  this.debug('match', f, this.pattern)\n  // short-circuit in the case of busted things.\n  // comments, etc.\n  if (this.comment) return false\n  if (this.empty) return f === ''\n\n  if (f === '/' && partial) return true\n\n  var options = this.options\n\n  // windows: need to use /, not \\\n  if (path.sep !== '/') {\n    f = f.split(path.sep).join('/')\n  }\n\n  // treat the test path as a set of pathparts.\n  f = f.split(slashSplit)\n  this.debug(this.pattern, 'split', f)\n\n  // just ONE of the pattern sets in this.set needs to match\n  // in order for it to be valid.  If negating, then just one\n  // match means that we have failed.\n  // Either way, return on the first hit.\n\n  var set = this.set\n  this.debug(this.pattern, 'set', set)\n\n  // Find the basename of the path by looking for the last non-empty segment\n  var filename\n  var i\n  for (i = f.length - 1; i >= 0; i--) {\n    filename = f[i]\n    if (filename) break\n  }\n\n  for (i = 0; i < set.length; i++) {\n    var pattern = set[i]\n    var file = f\n    if (options.matchBase && pattern.length === 1) {\n      file = [filename]\n    }\n    var hit = this.matchOne(file, pattern, partial)\n    if (hit) {\n      if (options.flipNegate) return true\n      return !this.negate\n    }\n  }\n\n  // didn't get any hits.  this is success if it's a negative\n  // pattern, failure otherwise.\n  if (options.flipNegate) return false\n  return this.negate\n}\n\n// set partial to true to test if, for example,\n// \"/a/b\" matches the start of \"/*/b/*/d\"\n// Partial means, if you run out of file before you run\n// out of pattern, then that's fine, as long as all\n// the parts match.\nMinimatch.prototype.matchOne = function (file, pattern, partial) {\n  var options = this.options\n\n  this.debug('matchOne',\n    { 'this': this, file: file, pattern: pattern })\n\n  this.debug('matchOne', file.length, pattern.length)\n\n  for (var fi = 0,\n      pi = 0,\n      fl = file.length,\n      pl = pattern.length\n      ; (fi < fl) && (pi < pl)\n      ; fi++, pi++) {\n    this.debug('matchOne loop')\n    var p = pattern[pi]\n    var f = file[fi]\n\n    this.debug(pattern, p, f)\n\n    // should be impossible.\n    // some invalid regexp stuff in the set.\n    if (p === false) return false\n\n    if (p === GLOBSTAR) {\n      this.debug('GLOBSTAR', [pattern, p, f])\n\n      // \"**\"\n      // a/**/b/**/c would match the following:\n      // a/b/x/y/z/c\n      // a/x/y/z/b/c\n      // a/b/x/b/x/c\n      // a/b/c\n      // To do this, take the rest of the pattern after\n      // the **, and see if it would match the file remainder.\n      // If so, return success.\n      // If not, the ** \"swallows\" a segment, and try again.\n      // This is recursively awful.\n      //\n      // a/**/b/**/c matching a/b/x/y/z/c\n      // - a matches a\n      // - doublestar\n      //   - matchOne(b/x/y/z/c, b/**/c)\n      //     - b matches b\n      //     - doublestar\n      //       - matchOne(x/y/z/c, c) -> no\n      //       - matchOne(y/z/c, c) -> no\n      //       - matchOne(z/c, c) -> no\n      //       - matchOne(c, c) yes, hit\n      var fr = fi\n      var pr = pi + 1\n      if (pr === pl) {\n        this.debug('** at the end')\n        // a ** at the end will just swallow the rest.\n        // We have found a match.\n        // however, it will not swallow /.x, unless\n        // options.dot is set.\n        // . and .. are *never* matched by **, for explosively\n        // exponential reasons.\n        for (; fi < fl; fi++) {\n          if (file[fi] === '.' || file[fi] === '..' ||\n            (!options.dot && file[fi].charAt(0) === '.')) return false\n        }\n        return true\n      }\n\n      // ok, let's see if we can swallow whatever we can.\n      while (fr < fl) {\n        var swallowee = file[fr]\n\n        this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n        // XXX remove this slice.  Just pass the start index.\n        if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n          this.debug('globstar found match!', fr, fl, swallowee)\n          // found a match.\n          return true\n        } else {\n          // can't swallow \".\" or \"..\" ever.\n          // can only swallow \".foo\" when explicitly asked.\n          if (swallowee === '.' || swallowee === '..' ||\n            (!options.dot && swallowee.charAt(0) === '.')) {\n            this.debug('dot detected!', file, fr, pattern, pr)\n            break\n          }\n\n          // ** swallows a segment, and continue.\n          this.debug('globstar swallow a segment, and continue')\n          fr++\n        }\n      }\n\n      // no match was found.\n      // However, in partial mode, we can't say this is necessarily over.\n      // If there's more *pattern* left, then\n      if (partial) {\n        // ran out of file\n        this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n        if (fr === fl) return true\n      }\n      return false\n    }\n\n    // something other than **\n    // non-magic patterns just have to match exactly\n    // patterns with magic have been turned into regexps.\n    var hit\n    if (typeof p === 'string') {\n      if (options.nocase) {\n        hit = f.toLowerCase() === p.toLowerCase()\n      } else {\n        hit = f === p\n      }\n      this.debug('string match', p, f, hit)\n    } else {\n      hit = f.match(p)\n      this.debug('pattern match', p, f, hit)\n    }\n\n    if (!hit) return false\n  }\n\n  // Note: ending in / means that we'll get a final \"\"\n  // at the end of the pattern.  This can only match a\n  // corresponding \"\" at the end of the file.\n  // If the file ends in /, then it can only match a\n  // a pattern that ends in /, unless the pattern just\n  // doesn't have any more for it. But, a/b/ should *not*\n  // match \"a/b/*\", even though \"\" matches against the\n  // [^/]*? pattern, except in partial mode, where it might\n  // simply not be reached yet.\n  // However, a/b/ should still satisfy a/*\n\n  // now either we fell off the end of the pattern, or we're done.\n  if (fi === fl && pi === pl) {\n    // ran out of pattern and filename at the same time.\n    // an exact hit!\n    return true\n  } else if (fi === fl) {\n    // ran out of file, but still had pattern left.\n    // this is ok if we're doing the match as part of\n    // a glob fs traversal.\n    return partial\n  } else if (pi === pl) {\n    // ran out of pattern, still have file left.\n    // this is only acceptable if we're on the very last\n    // empty segment of a file with a trailing slash.\n    // a/* should match a/b/\n    var emptyFileEnd = (fi === fl - 1) && (file[fi] === '')\n    return emptyFileEnd\n  }\n\n  // should be unreachable.\n  throw new Error('wtf?')\n}\n\n// replace stuff like \\* with *\nfunction globUnescape (s) {\n  return s.replace(/\\\\(.)/g, '$1')\n}\n\nfunction regExpEscape (s) {\n  return s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","'use strict';\n\nfunction posix(path) {\n\treturn path.charAt(0) === '/';\n}\n\nfunction win32(path) {\n\t// https://github.com/nodejs/node/blob/b3fcc245fb25539909ef1d5eaa01dbf92e168633/lib/path.js#L56\n\tvar splitDeviceRe = /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+)?([\\\\\\/])?([\\s\\S]*?)$/;\n\tvar result = splitDeviceRe.exec(path);\n\tvar device = result[1] || '';\n\tvar isUnc = Boolean(device && device.charAt(1) !== ':');\n\n\t// UNC paths are always absolute\n\treturn Boolean(result[2] || isUnc);\n}\n\nmodule.exports = process.platform === 'win32' ? win32 : posix;\nmodule.exports.posix = posix;\nmodule.exports.win32 = win32;\n","const assert = require(\"assert\")\nconst path = require(\"path\")\nconst fs = require(\"fs\")\nlet glob = undefined\ntry {\n  glob = require(\"glob\")\n} catch (_err) {\n  // treat glob as optional.\n}\n\nconst defaultGlobOpts = {\n  nosort: true,\n  silent: true\n}\n\n// for EMFILE handling\nlet timeout = 0\n\nconst isWindows = (process.platform === \"win32\")\n\nconst defaults = options => {\n  const methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(m => {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n  options.emfileWait = options.emfileWait || 1000\n  if (options.glob === false) {\n    options.disableGlob = true\n  }\n  if (options.disableGlob !== true && glob === undefined) {\n    throw Error('glob dependency not found, set `options.disableGlob = true` if intentional')\n  }\n  options.disableGlob = options.disableGlob || false\n  options.glob = options.glob || defaultGlobOpts\n}\n\nconst rimraf = (p, options, cb) => {\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert.equal(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  let busyTries = 0\n  let errState = null\n  let n = 0\n\n  const next = (er) => {\n    errState = errState || er\n    if (--n === 0)\n      cb(errState)\n  }\n\n  const afterGlob = (er, results) => {\n    if (er)\n      return cb(er)\n\n    n = results.length\n    if (n === 0)\n      return cb()\n\n    results.forEach(p => {\n      const CB = (er) => {\n        if (er) {\n          if ((er.code === \"EBUSY\" || er.code === \"ENOTEMPTY\" || er.code === \"EPERM\") &&\n              busyTries < options.maxBusyTries) {\n            busyTries ++\n            // try again, with the same exact callback as this one.\n            return setTimeout(() => rimraf_(p, options, CB), busyTries * 100)\n          }\n\n          // this one won't happen if graceful-fs is used.\n          if (er.code === \"EMFILE\" && timeout < options.emfileWait) {\n            return setTimeout(() => rimraf_(p, options, CB), timeout ++)\n          }\n\n          // already gone\n          if (er.code === \"ENOENT\") er = null\n        }\n\n        timeout = 0\n        next(er)\n      }\n      rimraf_(p, options, CB)\n    })\n  }\n\n  if (options.disableGlob || !glob.hasMagic(p))\n    return afterGlob(null, [p])\n\n  options.lstat(p, (er, stat) => {\n    if (!er)\n      return afterGlob(null, [p])\n\n    glob(p, options.glob, afterGlob)\n  })\n\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nconst rimraf_ = (p, options, cb) => {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, (er, st) => {\n    if (er && er.code === \"ENOENT\")\n      return cb(null)\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === \"EPERM\" && isWindows)\n      fixWinEPERM(p, options, er, cb)\n\n    if (st && st.isDirectory())\n      return rmdir(p, options, er, cb)\n\n    options.unlink(p, er => {\n      if (er) {\n        if (er.code === \"ENOENT\")\n          return cb(null)\n        if (er.code === \"EPERM\")\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        if (er.code === \"EISDIR\")\n          return rmdir(p, options, er, cb)\n      }\n      return cb(er)\n    })\n  })\n}\n\nconst fixWinEPERM = (p, options, er, cb) => {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.chmod(p, 0o666, er2 => {\n    if (er2)\n      cb(er2.code === \"ENOENT\" ? null : er)\n    else\n      options.stat(p, (er3, stats) => {\n        if (er3)\n          cb(er3.code === \"ENOENT\" ? null : er)\n        else if (stats.isDirectory())\n          rmdir(p, options, er, cb)\n        else\n          options.unlink(p, cb)\n      })\n  })\n}\n\nconst fixWinEPERMSync = (p, options, er) => {\n  assert(p)\n  assert(options)\n\n  try {\n    options.chmodSync(p, 0o666)\n  } catch (er2) {\n    if (er2.code === \"ENOENT\")\n      return\n    else\n      throw er\n  }\n\n  let stats\n  try {\n    stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === \"ENOENT\")\n      return\n    else\n      throw er\n  }\n\n  if (stats.isDirectory())\n    rmdirSync(p, options, er)\n  else\n    options.unlinkSync(p)\n}\n\nconst rmdir = (p, options, originalEr, cb) => {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, er => {\n    if (er && (er.code === \"ENOTEMPTY\" || er.code === \"EEXIST\" || er.code === \"EPERM\"))\n      rmkids(p, options, cb)\n    else if (er && er.code === \"ENOTDIR\")\n      cb(originalEr)\n    else\n      cb(er)\n  })\n}\n\nconst rmkids = (p, options, cb) => {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, (er, files) => {\n    if (er)\n      return cb(er)\n    let n = files.length\n    if (n === 0)\n      return options.rmdir(p, cb)\n    let errState\n    files.forEach(f => {\n      rimraf(path.join(p, f), options, er => {\n        if (errState)\n          return\n        if (er)\n          return cb(errState = er)\n        if (--n === 0)\n          options.rmdir(p, cb)\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nconst rimrafSync = (p, options) => {\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  let results\n\n  if (options.disableGlob || !glob.hasMagic(p)) {\n    results = [p]\n  } else {\n    try {\n      options.lstatSync(p)\n      results = [p]\n    } catch (er) {\n      results = glob.sync(p, options.glob)\n    }\n  }\n\n  if (!results.length)\n    return\n\n  for (let i = 0; i < results.length; i++) {\n    const p = results[i]\n\n    let st\n    try {\n      st = options.lstatSync(p)\n    } catch (er) {\n      if (er.code === \"ENOENT\")\n        return\n\n      // Windows can EPERM on stat.  Life is suffering.\n      if (er.code === \"EPERM\" && isWindows)\n        fixWinEPERMSync(p, options, er)\n    }\n\n    try {\n      // sunos lets the root user unlink directories, which is... weird.\n      if (st && st.isDirectory())\n        rmdirSync(p, options, null)\n      else\n        options.unlinkSync(p)\n    } catch (er) {\n      if (er.code === \"ENOENT\")\n        return\n      if (er.code === \"EPERM\")\n        return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n      if (er.code !== \"EISDIR\")\n        throw er\n\n      rmdirSync(p, options, er)\n    }\n  }\n}\n\nconst rmdirSync = (p, options, originalEr) => {\n  assert(p)\n  assert(options)\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === \"ENOENT\")\n      return\n    if (er.code === \"ENOTDIR\")\n      throw originalEr\n    if (er.code === \"ENOTEMPTY\" || er.code === \"EEXIST\" || er.code === \"EPERM\")\n      rmkidsSync(p, options)\n  }\n}\n\nconst rmkidsSync = (p, options) => {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(f => rimrafSync(path.join(p, f), options))\n\n  // We only end up here once we got ENOTEMPTY at least once, and\n  // at this point, we are guaranteed to have removed all the kids.\n  // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n  // try really hard to delete stuff on windows, because it has a\n  // PROFOUNDLY annoying habit of not closing handles promptly when\n  // files are deleted, resulting in spurious ENOTEMPTY errors.\n  const retries = isWindows ? 100 : 1\n  let i = 0\n  do {\n    let threw = true\n    try {\n      const ret = options.rmdirSync(p, options)\n      threw = false\n      return ret\n    } finally {\n      if (++i < retries && threw)\n        continue\n    }\n  } while (true)\n}\n\nmodule.exports = rimraf\nrimraf.sync = rimrafSync\n","/*!\n * Tmp\n *\n * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>\n *\n * MIT Licensed\n */\n\n/*\n * Module dependencies.\n */\nconst fs = require('fs');\nconst os = require('os');\nconst path = require('path');\nconst crypto = require('crypto');\nconst _c = { fs: fs.constants, os: os.constants };\nconst rimraf = require('rimraf');\n\n/*\n * The working inner variables.\n */\nconst\n  // the random characters to choose from\n  RANDOM_CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n\n  TEMPLATE_PATTERN = /XXXXXX/,\n\n  DEFAULT_TRIES = 3,\n\n  CREATE_FLAGS = (_c.O_CREAT || _c.fs.O_CREAT) | (_c.O_EXCL || _c.fs.O_EXCL) | (_c.O_RDWR || _c.fs.O_RDWR),\n\n  // constants are off on the windows platform and will not match the actual errno codes\n  IS_WIN32 = os.platform() === 'win32',\n  EBADF = _c.EBADF || _c.os.errno.EBADF,\n  ENOENT = _c.ENOENT || _c.os.errno.ENOENT,\n\n  DIR_MODE = 0o700 /* 448 */,\n  FILE_MODE = 0o600 /* 384 */,\n\n  EXIT = 'exit',\n\n  // this will hold the objects need to be removed on exit\n  _removeObjects = [],\n\n  // API change in fs.rmdirSync leads to error when passing in a second parameter, e.g. the callback\n  FN_RMDIR_SYNC = fs.rmdirSync.bind(fs),\n  FN_RIMRAF_SYNC = rimraf.sync;\n\nlet\n  _gracefulCleanup = false;\n\n/**\n * Gets a temporary file name.\n *\n * @param {(Options|tmpNameCallback)} options options or callback\n * @param {?tmpNameCallback} callback the callback function\n */\nfunction tmpName(options, callback) {\n  const\n    args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  try {\n    _assertAndSanitizeOptions(opts);\n  } catch (err) {\n    return cb(err);\n  }\n\n  let tries = opts.tries;\n  (function _getUniqueName() {\n    try {\n      const name = _generateTmpName(opts);\n\n      // check whether the path exists then retry if needed\n      fs.stat(name, function (err) {\n        /* istanbul ignore else */\n        if (!err) {\n          /* istanbul ignore else */\n          if (tries-- > 0) return _getUniqueName();\n\n          return cb(new Error('Could not get a unique tmp filename, max tries reached ' + name));\n        }\n\n        cb(null, name);\n      });\n    } catch (err) {\n      cb(err);\n    }\n  }());\n}\n\n/**\n * Synchronous version of tmpName.\n *\n * @param {Object} options\n * @returns {string} the generated random name\n * @throws {Error} if the options are invalid or could not generate a filename\n */\nfunction tmpNameSync(options) {\n  const\n    args = _parseArguments(options),\n    opts = args[0];\n\n  _assertAndSanitizeOptions(opts);\n\n  let tries = opts.tries;\n  do {\n    const name = _generateTmpName(opts);\n    try {\n      fs.statSync(name);\n    } catch (e) {\n      return name;\n    }\n  } while (tries-- > 0);\n\n  throw new Error('Could not get a unique tmp filename, max tries reached');\n}\n\n/**\n * Creates and opens a temporary file.\n *\n * @param {(Options|null|undefined|fileCallback)} options the config options or the callback function or null or undefined\n * @param {?fileCallback} callback\n */\nfunction file(options, callback) {\n  const\n    args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  // gets a temporary filename\n  tmpName(opts, function _tmpNameCreated(err, name) {\n    /* istanbul ignore else */\n    if (err) return cb(err);\n\n    // create and open the file\n    fs.open(name, CREATE_FLAGS, opts.mode || FILE_MODE, function _fileCreated(err, fd) {\n      /* istanbu ignore else */\n      if (err) return cb(err);\n\n      if (opts.discardDescriptor) {\n        return fs.close(fd, function _discardCallback(possibleErr) {\n          // the chance of getting an error on close here is rather low and might occur in the most edgiest cases only\n          return cb(possibleErr, name, undefined, _prepareTmpFileRemoveCallback(name, -1, opts, false));\n        });\n      } else {\n        // detachDescriptor passes the descriptor whereas discardDescriptor closes it, either way, we no longer care\n        // about the descriptor\n        const discardOrDetachDescriptor = opts.discardDescriptor || opts.detachDescriptor;\n        cb(null, name, fd, _prepareTmpFileRemoveCallback(name, discardOrDetachDescriptor ? -1 : fd, opts, false));\n      }\n    });\n  });\n}\n\n/**\n * Synchronous version of file.\n *\n * @param {Options} options\n * @returns {FileSyncObject} object consists of name, fd and removeCallback\n * @throws {Error} if cannot create a file\n */\nfunction fileSync(options) {\n  const\n    args = _parseArguments(options),\n    opts = args[0];\n\n  const discardOrDetachDescriptor = opts.discardDescriptor || opts.detachDescriptor;\n  const name = tmpNameSync(opts);\n  var fd = fs.openSync(name, CREATE_FLAGS, opts.mode || FILE_MODE);\n  /* istanbul ignore else */\n  if (opts.discardDescriptor) {\n    fs.closeSync(fd);\n    fd = undefined;\n  }\n\n  return {\n    name: name,\n    fd: fd,\n    removeCallback: _prepareTmpFileRemoveCallback(name, discardOrDetachDescriptor ? -1 : fd, opts, true)\n  };\n}\n\n/**\n * Creates a temporary directory.\n *\n * @param {(Options|dirCallback)} options the options or the callback function\n * @param {?dirCallback} callback\n */\nfunction dir(options, callback) {\n  const\n    args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  // gets a temporary filename\n  tmpName(opts, function _tmpNameCreated(err, name) {\n    /* istanbul ignore else */\n    if (err) return cb(err);\n\n    // create the directory\n    fs.mkdir(name, opts.mode || DIR_MODE, function _dirCreated(err) {\n      /* istanbul ignore else */\n      if (err) return cb(err);\n\n      cb(null, name, _prepareTmpDirRemoveCallback(name, opts, false));\n    });\n  });\n}\n\n/**\n * Synchronous version of dir.\n *\n * @param {Options} options\n * @returns {DirSyncObject} object consists of name and removeCallback\n * @throws {Error} if it cannot create a directory\n */\nfunction dirSync(options) {\n  const\n    args = _parseArguments(options),\n    opts = args[0];\n\n  const name = tmpNameSync(opts);\n  fs.mkdirSync(name, opts.mode || DIR_MODE);\n\n  return {\n    name: name,\n    removeCallback: _prepareTmpDirRemoveCallback(name, opts, true)\n  };\n}\n\n/**\n * Removes files asynchronously.\n *\n * @param {Object} fdPath\n * @param {Function} next\n * @private\n */\nfunction _removeFileAsync(fdPath, next) {\n  const _handler = function (err) {\n    if (err && !_isENOENT(err)) {\n      // reraise any unanticipated error\n      return next(err);\n    }\n    next();\n  };\n\n  if (0 <= fdPath[0])\n    fs.close(fdPath[0], function () {\n      fs.unlink(fdPath[1], _handler);\n    });\n  else fs.unlink(fdPath[1], _handler);\n}\n\n/**\n * Removes files synchronously.\n *\n * @param {Object} fdPath\n * @private\n */\nfunction _removeFileSync(fdPath) {\n  let rethrownException = null;\n  try {\n    if (0 <= fdPath[0]) fs.closeSync(fdPath[0]);\n  } catch (e) {\n    // reraise any unanticipated error\n    if (!_isEBADF(e) && !_isENOENT(e)) throw e;\n  } finally {\n    try {\n      fs.unlinkSync(fdPath[1]);\n    }\n    catch (e) {\n      // reraise any unanticipated error\n      if (!_isENOENT(e)) rethrownException = e;\n    }\n  }\n  if (rethrownException !== null) {\n    throw rethrownException;\n  }\n}\n\n/**\n * Prepares the callback for removal of the temporary file.\n *\n * Returns either a sync callback or a async callback depending on whether\n * fileSync or file was called, which is expressed by the sync parameter.\n *\n * @param {string} name the path of the file\n * @param {number} fd file descriptor\n * @param {Object} opts\n * @param {boolean} sync\n * @returns {fileCallback | fileCallbackSync}\n * @private\n */\nfunction _prepareTmpFileRemoveCallback(name, fd, opts, sync) {\n  const removeCallbackSync = _prepareRemoveCallback(_removeFileSync, [fd, name], sync);\n  const removeCallback = _prepareRemoveCallback(_removeFileAsync, [fd, name], sync, removeCallbackSync);\n\n  if (!opts.keep) _removeObjects.unshift(removeCallbackSync);\n\n  return sync ? removeCallbackSync : removeCallback;\n}\n\n/**\n * Prepares the callback for removal of the temporary directory.\n *\n * Returns either a sync callback or a async callback depending on whether\n * tmpFileSync or tmpFile was called, which is expressed by the sync parameter.\n *\n * @param {string} name\n * @param {Object} opts\n * @param {boolean} sync\n * @returns {Function} the callback\n * @private\n */\nfunction _prepareTmpDirRemoveCallback(name, opts, sync) {\n  const removeFunction = opts.unsafeCleanup ? rimraf : fs.rmdir.bind(fs);\n  const removeFunctionSync = opts.unsafeCleanup ? FN_RIMRAF_SYNC : FN_RMDIR_SYNC;\n  const removeCallbackSync = _prepareRemoveCallback(removeFunctionSync, name, sync);\n  const removeCallback = _prepareRemoveCallback(removeFunction, name, sync, removeCallbackSync);\n  if (!opts.keep) _removeObjects.unshift(removeCallbackSync);\n\n  return sync ? removeCallbackSync : removeCallback;\n}\n\n/**\n * Creates a guarded function wrapping the removeFunction call.\n *\n * The cleanup callback is save to be called multiple times.\n * Subsequent invocations will be ignored.\n *\n * @param {Function} removeFunction\n * @param {string} fileOrDirName\n * @param {boolean} sync\n * @param {cleanupCallbackSync?} cleanupCallbackSync\n * @returns {cleanupCallback | cleanupCallbackSync}\n * @private\n */\nfunction _prepareRemoveCallback(removeFunction, fileOrDirName, sync, cleanupCallbackSync) {\n  let called = false;\n\n  // if sync is true, the next parameter will be ignored\n  return function _cleanupCallback(next) {\n\n    /* istanbul ignore else */\n    if (!called) {\n      // remove cleanupCallback from cache\n      const toRemove = cleanupCallbackSync || _cleanupCallback;\n      const index = _removeObjects.indexOf(toRemove);\n      /* istanbul ignore else */\n      if (index >= 0) _removeObjects.splice(index, 1);\n\n      called = true;\n      if (sync || removeFunction === FN_RMDIR_SYNC || removeFunction === FN_RIMRAF_SYNC) {\n        return removeFunction(fileOrDirName);\n      } else {\n        return removeFunction(fileOrDirName, next || function() {});\n      }\n    }\n  };\n}\n\n/**\n * The garbage collector.\n *\n * @private\n */\nfunction _garbageCollector() {\n  /* istanbul ignore else */\n  if (!_gracefulCleanup) return;\n\n  // the function being called removes itself from _removeObjects,\n  // loop until _removeObjects is empty\n  while (_removeObjects.length) {\n    try {\n      _removeObjects[0]();\n    } catch (e) {\n      // already removed?\n    }\n  }\n}\n\n/**\n * Random name generator based on crypto.\n * Adapted from http://blog.tompawlak.org/how-to-generate-random-values-nodejs-javascript\n *\n * @param {number} howMany\n * @returns {string} the generated random name\n * @private\n */\nfunction _randomChars(howMany) {\n  let\n    value = [],\n    rnd = null;\n\n  // make sure that we do not fail because we ran out of entropy\n  try {\n    rnd = crypto.randomBytes(howMany);\n  } catch (e) {\n    rnd = crypto.pseudoRandomBytes(howMany);\n  }\n\n  for (var i = 0; i < howMany; i++) {\n    value.push(RANDOM_CHARS[rnd[i] % RANDOM_CHARS.length]);\n  }\n\n  return value.join('');\n}\n\n/**\n * Helper which determines whether a string s is blank, that is undefined, or empty or null.\n *\n * @private\n * @param {string} s\n * @returns {Boolean} true whether the string s is blank, false otherwise\n */\nfunction _isBlank(s) {\n  return s === null || _isUndefined(s) || !s.trim();\n}\n\n/**\n * Checks whether the `obj` parameter is defined or not.\n *\n * @param {Object} obj\n * @returns {boolean} true if the object is undefined\n * @private\n */\nfunction _isUndefined(obj) {\n  return typeof obj === 'undefined';\n}\n\n/**\n * Parses the function arguments.\n *\n * This function helps to have optional arguments.\n *\n * @param {(Options|null|undefined|Function)} options\n * @param {?Function} callback\n * @returns {Array} parsed arguments\n * @private\n */\nfunction _parseArguments(options, callback) {\n  /* istanbul ignore else */\n  if (typeof options === 'function') {\n    return [{}, options];\n  }\n\n  /* istanbul ignore else */\n  if (_isUndefined(options)) {\n    return [{}, callback];\n  }\n\n  // copy options so we do not leak the changes we make internally\n  const actualOptions = {};\n  for (const key of Object.getOwnPropertyNames(options)) {\n    actualOptions[key] = options[key];\n  }\n\n  return [actualOptions, callback];\n}\n\n/**\n * Generates a new temporary name.\n *\n * @param {Object} opts\n * @returns {string} the new random name according to opts\n * @private\n */\nfunction _generateTmpName(opts) {\n\n  const tmpDir = opts.tmpdir;\n\n  /* istanbul ignore else */\n  if (!_isUndefined(opts.name))\n    return path.join(tmpDir, opts.dir, opts.name);\n\n  /* istanbul ignore else */\n  if (!_isUndefined(opts.template))\n    return path.join(tmpDir, opts.dir, opts.template).replace(TEMPLATE_PATTERN, _randomChars(6));\n\n  // prefix and postfix\n  const name = [\n    opts.prefix ? opts.prefix : 'tmp',\n    '-',\n    process.pid,\n    '-',\n    _randomChars(12),\n    opts.postfix ? '-' + opts.postfix : ''\n  ].join('');\n\n  return path.join(tmpDir, opts.dir, name);\n}\n\n/**\n * Asserts whether the specified options are valid, also sanitizes options and provides sane defaults for missing\n * options.\n *\n * @param {Options} options\n * @private\n */\nfunction _assertAndSanitizeOptions(options) {\n\n  options.tmpdir = _getTmpDir(options);\n\n  const tmpDir = options.tmpdir;\n\n  /* istanbul ignore else */\n  if (!_isUndefined(options.name))\n    _assertIsRelative(options.name, 'name', tmpDir);\n  /* istanbul ignore else */\n  if (!_isUndefined(options.dir))\n    _assertIsRelative(options.dir, 'dir', tmpDir);\n  /* istanbul ignore else */\n  if (!_isUndefined(options.template)) {\n    _assertIsRelative(options.template, 'template', tmpDir);\n    if (!options.template.match(TEMPLATE_PATTERN))\n      throw new Error(`Invalid template, found \"${options.template}\".`);\n  }\n  /* istanbul ignore else */\n  if (!_isUndefined(options.tries) && isNaN(options.tries) || options.tries < 0)\n    throw new Error(`Invalid tries, found \"${options.tries}\".`);\n\n  // if a name was specified we will try once\n  options.tries = _isUndefined(options.name) ? options.tries || DEFAULT_TRIES : 1;\n  options.keep = !!options.keep;\n  options.detachDescriptor = !!options.detachDescriptor;\n  options.discardDescriptor = !!options.discardDescriptor;\n  options.unsafeCleanup = !!options.unsafeCleanup;\n\n  // sanitize dir, also keep (multiple) blanks if the user, purportedly sane, requests us to\n  options.dir = _isUndefined(options.dir) ? '' : path.relative(tmpDir, _resolvePath(options.dir, tmpDir));\n  options.template = _isUndefined(options.template) ? undefined : path.relative(tmpDir, _resolvePath(options.template, tmpDir));\n  // sanitize further if template is relative to options.dir\n  options.template = _isBlank(options.template) ? undefined : path.relative(options.dir, options.template);\n\n  // for completeness' sake only, also keep (multiple) blanks if the user, purportedly sane, requests us to\n  options.name = _isUndefined(options.name) ? undefined : _sanitizeName(options.name);\n  options.prefix = _isUndefined(options.prefix) ? '' : options.prefix;\n  options.postfix = _isUndefined(options.postfix) ? '' : options.postfix;\n}\n\n/**\n * Resolve the specified path name in respect to tmpDir.\n *\n * The specified name might include relative path components, e.g. ../\n * so we need to resolve in order to be sure that is is located inside tmpDir\n *\n * @param name\n * @param tmpDir\n * @returns {string}\n * @private\n */\nfunction _resolvePath(name, tmpDir) {\n  const sanitizedName = _sanitizeName(name);\n  if (sanitizedName.startsWith(tmpDir)) {\n    return path.resolve(sanitizedName);\n  } else {\n    return path.resolve(path.join(tmpDir, sanitizedName));\n  }\n}\n\n/**\n * Sanitize the specified path name by removing all quote characters.\n *\n * @param name\n * @returns {string}\n * @private\n */\nfunction _sanitizeName(name) {\n  if (_isBlank(name)) {\n    return name;\n  }\n  return name.replace(/[\"']/g, '');\n}\n\n/**\n * Asserts whether specified name is relative to the specified tmpDir.\n *\n * @param {string} name\n * @param {string} option\n * @param {string} tmpDir\n * @throws {Error}\n * @private\n */\nfunction _assertIsRelative(name, option, tmpDir) {\n  if (option === 'name') {\n    // assert that name is not absolute and does not contain a path\n    if (path.isAbsolute(name))\n      throw new Error(`${option} option must not contain an absolute path, found \"${name}\".`);\n    // must not fail on valid .<name> or ..<name> or similar such constructs\n    let basename = path.basename(name);\n    if (basename === '..' || basename === '.' || basename !== name)\n      throw new Error(`${option} option must not contain a path, found \"${name}\".`);\n  }\n  else { // if (option === 'dir' || option === 'template') {\n    // assert that dir or template are relative to tmpDir\n    if (path.isAbsolute(name) && !name.startsWith(tmpDir)) {\n      throw new Error(`${option} option must be relative to \"${tmpDir}\", found \"${name}\".`);\n    }\n    let resolvedPath = _resolvePath(name, tmpDir);\n    if (!resolvedPath.startsWith(tmpDir))\n      throw new Error(`${option} option must be relative to \"${tmpDir}\", found \"${resolvedPath}\".`);\n  }\n}\n\n/**\n * Helper for testing against EBADF to compensate changes made to Node 7.x under Windows.\n *\n * @private\n */\nfunction _isEBADF(error) {\n  return _isExpectedError(error, -EBADF, 'EBADF');\n}\n\n/**\n * Helper for testing against ENOENT to compensate changes made to Node 7.x under Windows.\n *\n * @private\n */\nfunction _isENOENT(error) {\n  return _isExpectedError(error, -ENOENT, 'ENOENT');\n}\n\n/**\n * Helper to determine whether the expected error code matches the actual code and errno,\n * which will differ between the supported node versions.\n *\n * - Node >= 7.0:\n *   error.code {string}\n *   error.errno {number} any numerical value will be negated\n *\n * CAVEAT\n *\n * On windows, the errno for EBADF is -4083 but os.constants.errno.EBADF is different and we must assume that ENOENT\n * is no different here.\n *\n * @param {SystemError} error\n * @param {number} errno\n * @param {string} code\n * @private\n */\nfunction _isExpectedError(error, errno, code) {\n  return IS_WIN32 ? error.code === code : error.code === code && error.errno === errno;\n}\n\n/**\n * Sets the graceful cleanup.\n *\n * If graceful cleanup is set, tmp will remove all controlled temporary objects on process exit, otherwise the\n * temporary objects will remain in place, waiting to be cleaned up on system restart or otherwise scheduled temporary\n * object removals.\n */\nfunction setGracefulCleanup() {\n  _gracefulCleanup = true;\n}\n\n/**\n * Returns the currently configured tmp dir from os.tmpdir().\n *\n * @private\n * @param {?Options} options\n * @returns {string} the currently configured tmp dir\n */\nfunction _getTmpDir(options) {\n  return path.resolve(_sanitizeName(options && options.tmpdir || os.tmpdir()));\n}\n\n// Install process exit listener\nprocess.addListener(EXIT, _garbageCollector);\n\n/**\n * Configuration options.\n *\n * @typedef {Object} Options\n * @property {?boolean} keep the temporary object (file or dir) will not be garbage collected\n * @property {?number} tries the number of tries before give up the name generation\n * @property (?int) mode the access mode, defaults are 0o700 for directories and 0o600 for files\n * @property {?string} template the \"mkstemp\" like filename template\n * @property {?string} name fixed name relative to tmpdir or the specified dir option\n * @property {?string} dir tmp directory relative to the root tmp directory in use\n * @property {?string} prefix prefix for the generated name\n * @property {?string} postfix postfix for the generated name\n * @property {?string} tmpdir the root tmp directory which overrides the os tmpdir\n * @property {?boolean} unsafeCleanup recursively removes the created temporary directory, even when it's not empty\n * @property {?boolean} detachDescriptor detaches the file descriptor, caller is responsible for closing the file, tmp will no longer try closing the file during garbage collection\n * @property {?boolean} discardDescriptor discards the file descriptor (closes file, fd is -1), tmp will no longer try closing the file during garbage collection\n */\n\n/**\n * @typedef {Object} FileSyncObject\n * @property {string} name the name of the file\n * @property {string} fd the file descriptor or -1 if the fd has been discarded\n * @property {fileCallback} removeCallback the callback function to remove the file\n */\n\n/**\n * @typedef {Object} DirSyncObject\n * @property {string} name the name of the directory\n * @property {fileCallback} removeCallback the callback function to remove the directory\n */\n\n/**\n * @callback tmpNameCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n */\n\n/**\n * @callback fileCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {number} fd the file descriptor or -1 if the fd had been discarded\n * @param {cleanupCallback} fn the cleanup callback function\n */\n\n/**\n * @callback fileCallbackSync\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {number} fd the file descriptor or -1 if the fd had been discarded\n * @param {cleanupCallbackSync} fn the cleanup callback function\n */\n\n/**\n * @callback dirCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {cleanupCallback} fn the cleanup callback function\n */\n\n/**\n * @callback dirCallbackSync\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {cleanupCallbackSync} fn the cleanup callback function\n */\n\n/**\n * Removes the temporary created file or directory.\n *\n * @callback cleanupCallback\n * @param {simpleCallback} [next] function to call whenever the tmp object needs to be removed\n */\n\n/**\n * Removes the temporary created file or directory.\n *\n * @callback cleanupCallbackSync\n */\n\n/**\n * Callback function for function composition.\n * @see {@link https://github.com/raszi/node-tmp/issues/57|raszi/node-tmp#57}\n *\n * @callback simpleCallback\n */\n\n// exporting all the needed methods\n\n// evaluate _getTmpDir() lazily, mainly for simplifying testing but it also will\n// allow users to reconfigure the temporary directory\nObject.defineProperty(module.exports, 'tmpdir', {\n  enumerable: true,\n  configurable: false,\n  get: function () {\n    return _getTmpDir();\n  }\n});\n\nmodule.exports.dir = dir;\nmodule.exports.dirSync = dirSync;\n\nmodule.exports.file = file;\nmodule.exports.fileSync = fileSync;\n\nmodule.exports.tmpName = tmpName;\nmodule.exports.tmpNameSync = tmpNameSync;\n\nmodule.exports.setGracefulCleanup = setGracefulCleanup;\n","import * as vscode from \"vscode\";\r\nimport fs from \"fs\";\r\nimport path from \"path\";\r\n\r\nimport * as servers from \"./modules/servers/main\";\r\nimport { WebSocketServer } from \"ws\";\r\n\r\nlet server: WebSocketServer;\r\n\r\nexport function activate(context: vscode.ExtensionContext) {\r\n\tserver?.close();\r\n\r\n\tlet workspace_folder: vscode.WorkspaceFolder | undefined;\r\n\tif (workspace_folder = vscode.workspace.workspaceFolders?.find(x => x.name === \"Krunker sync\")){\r\n\t\tif (fs.readdirSync(workspace_folder.uri.fsPath).includes(\".tmp\")){\r\n\t\t\tfs.rmSync(path.join(workspace_folder.uri.fsPath, \".tmp\"));\r\n\t\t\tserver = servers.establish_server(workspace_folder);\r\n\t\t}\r\n\t}\r\n\r\n\tcontext.subscriptions.push(vscode.commands.registerCommand(\"krunkscript-linker.connect\", (): void => {\r\n\t\tserver = servers.sync_server();\r\n\t}));\r\n}\r\n\r\nexport function deactivate() {\r\n\tserver?.close();\r\n\tvscode.window.showErrorMessage(\"Host disconnected.\");\r\n}","import path from \"path\";\r\nimport * as vscode from \"vscode\";\r\nimport WebSocket, { WebSocketServer } from \"ws\";\r\nimport socket_message from \"../../interfaces/websocket_callback/socket_message\";\r\n\r\nexport default function establish_server(workspace: vscode.WorkspaceFolder): WebSocketServer {\r\n\tconst server: WebSocketServer = new WebSocket.Server({\r\n\t\tport: 8586\r\n\t});\r\n\r\n\tserver.on(\"connection\", (socket: WebSocket) => {\r\n\t\tif (server.clients.size > 1) {\r\n\t\t\tsocket.close();\r\n\t\t\tvscode.window.showErrorMessage(\"You can only connect 1 editor at a time.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvscode.window.showInformationMessage(\"Succesfully connected. Ready for use.\");\r\n\t\t}\r\n\r\n\t\tsocket.onclose = (): void => {\r\n\t\t\tvscode.window.showInformationMessage(\"Krunkscript disconnected.\");\r\n\t\t\tserver.clients.clear();\r\n\t\t};\r\n\r\n\t\tsocket.onmessage = (msg: WebSocket.MessageEvent): void => {\r\n\t\t\tlet ws_content: any = JSON.parse(msg.data.toString(\"utf-8\"));\r\n\t\t\tswitch (ws_content?.type) {\r\n\t\t\t\tcase \"error\": \r\n\t\t\t\tlet errors = ws_content.message.split(\"\\n\");\r\n\t\t\t\tfor (let index = 0; index < errors.length; index++) {\r\n\t\t\t\t\tlet x = vscode.window.showErrorMessage(errors[index]);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"success\":\r\n\t\t\t\t\tvscode.window.showInformationMessage(\"Compiled succesfully\");\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvscode.workspace.onDidSaveTextDocument((document: vscode.TextDocument) => {\r\n\t\t\tif (document.languageId === \"krnk\" && document.uri.scheme === \"file\") {\r\n\r\n\t\t\t\tlet down_sync: socket_message = {type: \"down_sync\", server: null, client: null};\r\n\t\t\t\tlet file_name: string = path.basename(document.fileName, \".krnk\") ?? null;\r\n\t\t\t\tdown_sync[file_name] = document.getText().replace(\"\\r\", \"\");\r\n\t\t\t\tsocket.send(JSON.stringify(down_sync));\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\treturn server;\r\n}","import establish_server from \"./establish_server\";\r\nimport sync_server from \"./sync_server\";\r\n\r\nexport{\r\n    establish_server,\r\n    sync_server\r\n};","import * as vscode from \"vscode\";\r\nimport WebSocket, { WebSocketServer } from \"ws\";\r\n\r\nimport * as websocket_callbacks from \"../websocket_callback/main\";\r\nimport socket_message from \"../../interfaces/websocket_callback/socket_message\";\r\n\r\nexport default function sync_server(): WebSocketServer{\r\n    const server: WebSocketServer = new WebSocket.Server({\r\n        port: 8586\r\n    });\r\n\r\n    server.on(\"connection\", (socket: WebSocket) => {\r\n        if (server.clients.size > 1) {\r\n            socket.close();\r\n            vscode.window.showErrorMessage(\"You can only connect 1 editor at a time.\");\r\n            return;\r\n        }\r\n\r\n        socket.onclose = (): void => {\r\n            server.clients.clear();\r\n        };\r\n\r\n        socket.onmessage = (msg: WebSocket.MessageEvent): void => {\r\n            let ws_content: socket_message = JSON.parse(msg.data.toString(\"utf-8\"));\r\n            let sync_content: socket_message = {type: \"up_sync\", server: \"\", client: \"\"};\r\n\r\n            switch (ws_content?.type) {\r\n                case \"up_sync\":\r\n                    sync_content = ws_content;\r\n                    socket.send(JSON.stringify({type: \"restore\"}));\r\n                    server.close();\r\n                    websocket_callbacks.up_sync(sync_content);\r\n                break;\r\n            }\r\n        };\r\n    });\r\n\r\n    vscode.window.showInformationMessage(\"Connection is up, looking to sync with editor...\");\r\n\r\n    return server;\r\n}","import up_sync from \"./up_sync\";\r\n\r\nexport{\r\n    up_sync\r\n};","import * as vscode from \"vscode\";\r\nimport up_sync from \"../../interfaces/websocket_callback/socket_message\";\r\nimport tmp from \"tmp\";\r\nimport path from \"path\";\r\n\r\nexport default async function(ws_content: up_sync){    \r\n    const folder = tmp.dirSync({keep: true});\r\n    const folder_uri = vscode.Uri.file(folder.name);\r\n    const tmp_file = new vscode.WorkspaceEdit();\r\n\r\n    vscode.workspace.updateWorkspaceFolders(0, vscode.workspace.workspaceFolders?.length ?? 0, {\r\n        uri: vscode.Uri.file(path.join(folder_uri.path)),\r\n        name: \"Krunker sync\"\r\n    });\r\n\r\n    Object.keys(ws_content).filter(x => x !== \"type\").map(type => {\r\n        const files = new vscode.WorkspaceEdit();\r\n        const file_uri: vscode.Uri = vscode.Uri.file(path.join(folder_uri.path, type + \".krnk\"));\r\n\r\n        files.createFile(file_uri, {overwrite: true});\r\n        files.set(file_uri, [vscode.TextEdit.insert(new vscode.Position(0, 0), ws_content[type] ?? \"\")]);\r\n        vscode.workspace.applyEdit(files);\r\n    });\r\n\r\n    tmp_file.createFile(vscode.Uri.file(path.join(folder_uri.path, \".tmp\")));\r\n    vscode.workspace.applyEdit(tmp_file);\r\n}","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nWebSocket.WebSocket = WebSocket;\nWebSocket.WebSocketServer = WebSocket.Server;\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options = {}) {\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = listener;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data, true);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf, false);\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst mask = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   */\n  constructor(socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame(data, options) {\n    const merge = options.mask && options.readOnly;\n    let offset = options.mask ? 6 : 2;\n    let payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    randomFillSync(mask, 0, 4);\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doClose(data, mask, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x08,\n        mask,\n        readOnly: false\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPing(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPing(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x09,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPong(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPong(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x0a,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const buf = toBuffer(data);\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = buf.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly: toBuffer.readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, buf, this._compress, opts, cb]);\n      } else {\n        this.dispatch(buf, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(buf, {\n          fin: options.fin,\n          rsv1: false,\n          opcode,\n          mask: options.mask,\n          readOnly: toBuffer.readOnly\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += data.length;\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const callback = this._queue[i][4];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= data.length;\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let resumeOnReceiverDrain = true;\n  let terminateOnDestroy = true;\n\n  function receiverOnDrain() {\n    if (resumeOnReceiverDrain) ws._socket.resume();\n  }\n\n  if (ws.readyState === ws.CONNECTING) {\n    ws.once('open', function open() {\n      ws._receiver.removeAllListeners('drain');\n      ws._receiver.on('drain', receiverOnDrain);\n    });\n  } else {\n    ws._receiver.removeAllListeners('drain');\n    ws._receiver.on('drain', receiverOnDrain);\n  }\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) {\n      resumeOnReceiverDrain = false;\n      ws._socket.pause();\n    }\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.readyState === ws.OPEN && !resumeOnReceiverDrain) {\n      resumeOnReceiverDrain = true;\n      if (!ws._receiver._writableState.needDrain) ws._socket.resume();\n    }\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  const isValidUTF8 = require('utf-8-validate');\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    },\n    tokenChars\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8,\n    tokenChars\n  };\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key']\n        : false;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (\n      req.method !== 'GET' ||\n      req.headers.upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new WebSocket(null);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._extensions = {};\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n\n    websocket._url = address;\n  }\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isUnixSocket) {\n    throw new SyntaxError(\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", or \"ws+unix:\"'\n    );\n  }\n\n  if (isUnixSocket && !parsedUrl.pathname) {\n    throw new SyntaxError(\"The URL's pathname is empty\");\n  }\n\n  if (parsedUrl.hash) {\n    throw new SyntaxError('The URL contains a fragment identifier');\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    websocket._readyState = WebSocket.CLOSING;\n    websocket.emit('error', err);\n    websocket.emitClose();\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      const addr = new URL(location, address);\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","module.exports = require(\"bufferutil\");","module.exports = require(\"utf-8-validate\");","module.exports = require(\"vscode\");","module.exports = require(\"assert\");","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"stream\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(112);\n"],"names":["balanced","a","b","str","RegExp","maybeMatch","r","range","start","end","pre","slice","body","length","post","reg","m","match","begs","beg","left","right","result","ai","indexOf","bi","i","push","pop","module","exports","concatMap","substr","expand","split","join","escSlash","escOpen","escClose","escComma","escPeriod","escapeBraces","map","unescapeBraces","Math","random","numeric","parseInt","charCodeAt","parseCommaParts","parts","p","postParts","shift","apply","embrace","isPadded","el","test","lte","y","gte","isTop","expansions","n","isNumericSequence","isAlphaSequence","isSequence","isOptions","N","x","width","max","incr","abs","pad","some","c","String","fromCharCode","need","z","Array","j","k","expansion","xs","fn","res","isArray","Object","prototype","toString","call","realpath","sync","realpathSync","monkeypatch","fs","unmonkeypatch","origRealpath","origRealpathSync","version","process","ok","old","newError","er","syscall","code","cache","cb","pathModule","isWindows","platform","DEBUG","env","NODE_DEBUG","normalize","nextPartRe","splitRootRe","resolve","hasOwnProperty","pos","current","base","previous","original","seenLinks","knownHard","exec","lstatSync","lastIndex","resolvedLink","stat","isSymbolicLink","linkTarget","id","dev","ino","statSync","readlinkSync","callback","backtrace","Error","err","message","missingCallback","throwDeprecation","noDeprecation","msg","stack","traceDeprecation","console","trace","error","rethrow","maybeCallback","nextTick","bind","lstat","LOOP","gotResolvedLink","gotStat","gotTarget","readlink","target","ownProp","obj","field","setopts","self","pattern","options","matchBase","noglobstar","silent","strict","realpathCache","create","follow","dot","mark","nodir","nounique","nonull","nosort","nocase","noprocess","absolute","maxLength","Infinity","statCache","symlinks","ignore","ignoreMap","setupIgnores","changedCwd","cwd","path","root","replace","cwdAbs","isAbsolute","makeAbs","nomount","nonegate","nocomment","minimatch","Minimatch","finish","nou","all","l","matches","keys","forEach","literal","globSet","sort","alphasort","_mark","filter","e","notDir","isIgnored","found","isDir","slash","mabs","childrenIgnored","item","gmatcher","localeCompare","gpattern","matcher","f","charAt","glob","rp","inherits","EE","assert","globSync","common","inflight","once","TypeError","Glob","GlobSync","this","_didRealPath","set","on","_processing","_emitQueue","_processQueue","paused","done","_process","_finish","hasMagic","options_","origin","add","extend","aborted","_didRealpath","_realpath","emit","_realpathSet","next","index","matchset","_makeAbs","real","abort","pause","resume","eq","_emitMatch","pq","inGlobStar","prefix","_processSimple","read","remain","GLOBSTAR","_processGlobStar","_processReaddir","_readdir","entries","_processReaddir2","pn","negate","rawGlob","_glob","dotOk","matchedEntries","len","concat","st","_readdirInGlobStar","lstatcb","isSym","isDirectory","readdir","_readdirError","_readdirEntries","readdirCb","_processGlobStar2","remainWithoutGlobStar","gspref","noGlobStar","instead","below","_stat","exists","_processSimple2","trail","needDir","undefined","type","statcb","_stat2","arguments","newPattern","readdirSync","wrappy","reqs","args","array","key","RES","cbs","splice","makeres","util","ctor","superCtor","super_","constructor","value","enumerable","writable","configurable","TempCtor","sep","plTypes","open","close","qmark","star","reSpecials","reduce","slashSplit","ext","t","trim","regexp","comment","empty","make","braceExpand","nobrace","list","defaults","def","orig","debug","_made","parseNegate","globParts","s","si","parse","negateOffset","isSub","stateChar","re","escaping","patternListStack","negativeLists","inClass","reClassStart","classStart","patternStart","clearStateChar","noext","reStart","pl","reEnd","cs","substring","sp","SUBPARSE","tail","_","$1","$2","addPatternStart","nl","nlBefore","nlFirst","nlLast","nlAfter","openParensBefore","cleanAfter","dollar","flags","regExp","_src","makeRe","twoStar","ex","mm","partial","filename","file","matchOne","flipNegate","fi","pi","fl","hit","fr","pr","swallowee","toLowerCase","called","onceStrict","onceError","name","proto","defineProperty","Function","posix","win32","device","isUnc","Boolean","_err","defaultGlobOpts","timeout","maxBusyTries","emfileWait","disableGlob","rimraf","equal","busyTries","errState","afterGlob","results","CB","setTimeout","rimraf_","fixWinEPERM","rmdir","unlink","chmod","er2","er3","stats","fixWinEPERMSync","chmodSync","rmdirSync","unlinkSync","originalEr","rmkids","files","rimrafSync","rmkidsSync","retries","threw","ret","os","crypto","_c","constants","RANDOM_CHARS","TEMPLATE_PATTERN","CREATE_FLAGS","O_CREAT","O_EXCL","O_RDWR","IS_WIN32","EBADF","errno","ENOENT","_removeObjects","FN_RMDIR_SYNC","FN_RIMRAF_SYNC","_gracefulCleanup","tmpName","_parseArguments","opts","_assertAndSanitizeOptions","tries","_getUniqueName","_generateTmpName","tmpNameSync","_removeFileAsync","fdPath","_handler","_isENOENT","_removeFileSync","rethrownException","closeSync","_isExpectedError","_prepareTmpFileRemoveCallback","fd","removeCallbackSync","_prepareRemoveCallback","removeCallback","keep","unshift","_prepareTmpDirRemoveCallback","removeFunction","unsafeCleanup","fileOrDirName","cleanupCallbackSync","_cleanupCallback","toRemove","_randomChars","howMany","rnd","randomBytes","pseudoRandomBytes","_isBlank","_isUndefined","actualOptions","getOwnPropertyNames","tmpDir","tmpdir","dir","template","pid","postfix","_getTmpDir","_assertIsRelative","isNaN","detachDescriptor","discardDescriptor","relative","_resolvePath","_sanitizeName","sanitizedName","startsWith","option","basename","resolvedPath","addListener","get","mkdir","mode","dirSync","mkdirSync","possibleErr","discardOrDetachDescriptor","fileSync","openSync","setGracefulCleanup","server","context","workspace_folder","vscode","workspace","workspaceFolders","find","uri","fsPath","includes","rmSync","servers","establish_server","subscriptions","commands","registerCommand","sync_server","window","showErrorMessage","Server","port","socket","clients","size","showInformationMessage","onclose","clear","onmessage","ws_content","JSON","data","errors","onDidSaveTextDocument","document","languageId","scheme","down_sync","client","fileName","getText","send","stringify","sync_content","websocket_callbacks","up_sync","async","folder","folder_uri","Uri","tmp_file","WorkspaceEdit","updateWorkspaceFolders","file_uri","createFile","overwrite","TextEdit","insert","Position","applyEdit","wrapper","WebSocket","createWebSocketStream","Receiver","Sender","WebSocketServer","EMPTY_BUFFER","totalLength","Buffer","allocUnsafe","offset","buf","_mask","source","mask","output","_unmask","buffer","toArrayBuffer","byteLength","byteOffset","toBuffer","readOnly","isBuffer","ArrayBuffer","from","isView","bufferUtil","unmask","BINARY_TYPES","alloc","GUID","kForOnEventAttribute","Symbol","kListener","kStatusCode","kWebSocket","NOOP","kCode","kData","kError","kMessage","kReason","kTarget","kType","kWasClean","Event","CloseEvent","super","reason","wasClean","ErrorEvent","MessageEvent","EventTarget","addEventListener","listener","isBinary","event","_closeFrameReceived","_closeFrameSent","removeEventListener","handler","listeners","removeListener","tokenChars","dest","elem","format","extensions","extension","configurations","params","values","v","header","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","SyntaxError","token","kDone","kRun","concurrency","pending","jobs","job","zlib","Limiter","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","zlibLimiter","deflateOnData","chunk","inflateOnData","_maxPayload","RangeError","reset","inflateOnError","_inflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","normalizeParams","acceptAsServer","acceptAsClient","cleanup","accepted","response","num","Number","isInteger","decompress","fin","_decompress","compress","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","write","flush","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","Writable","PerMessageDeflate","isValidStatusCode","isValidUTF8","ErrorCtor","statusCode","errorCode","captureStackTrace","_binaryType","binaryType","_extensions","_skipUTF8Validation","skipUTF8Validation","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","_write","encoding","startLoop","consume","dst","Uint8Array","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","compressed","haveLength","readUInt16BE","readUInt32BE","pow","controlMessage","dataMessage","messageLength","fragments","randomFillSync","applyMask","_socket","_firstFragment","_deflating","_queue","static","merge","payloadLength","opcode","rsv1","writeUInt16BE","writeUInt32BE","enqueue","doClose","sendFrame","frame","ping","doPing","pong","doPong","perMessageDeflate","binary","dispatch","destroyed","dequeue","Reflect","cork","uncork","Duplex","emitClose","stream","duplexOnEnd","_writableState","finished","destroy","duplexOnError","listenerCount","ws","resumeOnReceiverDrain","terminateOnDestroy","receiverOnDrain","readyState","CONNECTING","_receiver","removeAllListeners","duplex","autoDestroy","objectMode","writableObjectMode","_destroy","CLOSED","terminate","_final","_read","OPEN","needDrain","protocols","Set","protocol","has","_isValidUTF8","EventEmitter","http","createHash","subprotocol","keyRegex","socketOnError","abortHandshake","headers","STATUS_CODES","Connection","h","handleProtocols","clientTracking","verifyClient","noServer","backlog","host","_server","createServer","req","writeHead","listen","emitConnection","_removeListeners","addListeners","listening","upgrade","head","handleUpgrade","_shouldEmitClose","address","shouldHandle","url","method","secWebSocketProtocol","secWebSocketExtensions","info","secure","authorized","encrypted","verified","completeUpgrade","readable","update","digest","_protocol","setSocket","delete","https","net","tls","Readable","URL","readyStates","subprotocolRegex","protocolVersions","_closeCode","_closeMessage","_closeTimer","_readyState","_sender","_bufferedAmount","_redirects","initAsClient","bufferedAmount","onerror","onopen","_url","receiver","receiverOnConclude","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setNoDelay","socketOnClose","socketOnData","socketOnEnd","_req","CLOSING","errorEmitted","sendAfterClose","websocket","protocolVersion","followRedirects","maxRedirects","createConnection","socketPath","hostname","parsedUrl","href","isSecure","isUnixSocket","pathname","hash","defaultPort","protocolSet","tlsConnect","netConnect","Upgrade","search","handshakeTimeout","Origin","username","password","auth","location","addr","serverProt","protError","extensionNames","connect","servername","isIP","setHeader","receiverOnFinish","clearTimeout","property","require","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}